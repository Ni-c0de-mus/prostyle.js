/*!
 * VERSION: 0.18.0
 * DATE: 28-Jul-2015
 * UPDATES AND DOCS AT: https://prostyle.io/
 * 
 * @license Copyright (c) 2011-2015, Pro Graphics, Inc. All rights reserved. 
 * This work is subject to the terms at https://prostyle.io/licensing/
 * 
 * @author: Gary Chamberlain, gary@pro.graphics.
 **/

var ProStyle;
(function(e){(function(e){e.autoButton=function(a,f,b,g){void 0===b&&(b=1E3);void 0===g&&(g=2);var h,d=b,c=function(){f(!1);h=setTimeout(c,d);d/=g},m=function(){void 0!==h&&(clearTimeout(h),h=void 0,f(!0))};a.onmousedown=function(){d=b;c()};a.onmouseup=function(){m()};a.onmouseout=function(){m()}};e.checkBrowserSupport=function(){var a=document.body;return a.classList&&a.dataset&&null!==e.prefixCssStyleIfNeeded("perspective")};e.configureMetaViewport=function(){var a=e.querySelector("meta[name='viewport']")||document.createElement("meta");
a.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no";a.parentNode!==document.head&&(a.name="viewport",document.head.appendChild(a))};e.contentLoaded=function(a,f){var b=!1,g=!0,h=a.document,d=h.documentElement,c=h.addEventListener,m=c?"addEventListener":"attachEvent",v=c?"removeEventListener":"detachEvent",t=c?"":"on",n=function(c){if("readystatechange"!=c.type||"complete"==h.readyState)("load"==c.type?a:h)[v](t+c.type,n,!1),!b&&(b=!0)&&f.call(a,c.type||c)},p=function(){try{d.doScroll("left")}catch(c){setTimeout(p,
50);return}n("poll")};if("complete"==h.readyState)f.call(a,"lazy");else{if(!c&&d.doScroll){try{g=!a.frameElement}catch(e){}g&&p()}h[m](t+"DOMContentLoaded",n,!1);h[m](t+"readystatechange",n,!1);a[m](t+"load",n,!1)}};e.convertToNumber=function(a,f,b){void 0===f&&(f=0);void 0===b&&(b=!1);"string"==typeof a&&b&&(a=parseFloat(a));return isNaN(a)?f:Number(a)};e.convertToNumber2=function(a){return""===a?void 0:isNaN(a)?void 0:Number(a)};e.logError=function(a,f){console.log("ProStyle Error: "+a+" - "+f)};
e.querySelector=function(a,f){void 0===f&&(f=document);try{return f.querySelector(a)}catch(b){e.logError("Util.querySelector",b.message)}};e.createChildDivElement=function(a,f){void 0===f&&(f=void 0);var b=document.createElement("div");f&&(b.className=f);a.appendChild(b);return b};e.createChildImageElement=function(a,f,b,g,h){void 0===g&&(g=void 0);void 0===h&&(h=void 0);var d=document.createElement("img");d.setAttribute("class",f);d.setAttribute("src",b);void 0===g&&void 0===h&&(h=100);void 0!==
g&&d.setAttribute("width",g.toString()+"%");void 0!==h&&d.setAttribute("height",h.toString()+"%");a.appendChild(d);return d};e.createStyleElement=function(a){var f=document.createElement("style");f.type="text/css";f.id=a;e.querySelector("head").appendChild(f);return f};e.createSvgElement=function(a,f,b){a=document.createElementNS("http://www.w3.org/2000/svg",a);for(var g in f)a.setAttribute(g,f[g]);b&&b.appendChild(a);return a};var r=document.createElement("dummy").style,u=["Webkit","Moz","O","ms",
"Khtml"],k={};e.prefixCssStyleIfNeeded=function(a){if("undefined"===typeof k[a]){var f=a.charAt(0).toUpperCase()+a.substr(1),f=(a+" "+u.join(f+" ")+f).split(" ");k[a]=null;for(var b in f)if(void 0!==r[f[b]]){k[a]=f[b];break}}return k[a]};r=document.createElement("dummy").style;e.encodeStyle=function(a,f){r.cssText="";a=e.prefixCssStyleIfNeeded(a);r[a]=f;return r.cssText};r=document.createElement("dummy").style;e.encodeStyles=function(a){r.cssText="";var f,b;for(f in a)a.hasOwnProperty(f)&&(b=e.prefixCssStyleIfNeeded(f),
null!==b&&(r[b]=a[f]));return r.cssText};r=document.createElement("dummy").style;e.encodeStyleSheet=function(a){var f=[];a.selectors.forEach(function(b){a.hasOwnProperty(b)&&("string"===typeof a[b]?f.push(b+" { "+a[b]+" }\n"):f.push(b+" { "+e.encodeStyles(a[b])+" }\n"))});return f.join("")};e.getElementText=function(a){return a[document.body.textContent?"textContent":"innerText"]};e.lowercaseProperties=function(a){var f={},b;for(b in a)a.hasOwnProperty(b)&&(f[b.toString().trim().toLowerCase()]=a[b]);
return f};e.getSetup=function(a,f){if(void 0!==a){f=f.toLowerCase();a=e.lowercaseProperties(a);var b=a.setup;return void 0!==b&&(b=e.lowercaseProperties(b),void 0!==b[f])?b[f]:a[f]}};e.getSign=function(a){return a?0>a?-1:1:0};e.getGSTransform=function(a){var f={x:0,y:0,z:0,xPercent:0,yPercent:0,rotationX:0,rotationY:0,rotation:0,scaleX:1,scaleY:1,skewX:0};a&&(a=a._gsTransform)&&(void 0!==a.x&&(f.x=a.x),void 0!==a.y&&(f.y=a.y),void 0!==a.z&&(f.z=a.z),void 0!==a.xPercent&&(f.xPercent=a.xPercent),void 0!==
a.yPercent&&(f.yPercent=a.yPercent),void 0!==a.rotationX&&(f.rotationX=a.rotationX),void 0!==a.rotationY&&(f.rotationY=a.rotationY),void 0!==a.rotation&&(f.rotation=a.rotation),void 0!==a.scaleX&&(f.scaleX=a.scaleX),void 0!==a.scaleY&&(f.scaleY=a.scaleY),void 0!==a.skewX&&(f.skewX=a.skewX));return f};e.getStyleElement=function(a){return e.querySelector("#"+a)||e.createStyleElement(a)};e.insertIntoArray=function(a,f,b){a.splice(f,0,b)};e.isAbsoluteUrl=function(a){if(a){a=a.toString().trim();if(0===
a.indexOf("//"))return!0;a=a.toLowerCase();if(0===a.indexOf("http://")||0===a.indexOf("https://")||0===a.indexOf("ftp://"))return!0}return!1};e.logStepValues=function(a,f,b,g,h){var d=[];d.push("f");d.push(a.toString());d.push("p");d.push(f.toString());d.push("i");d.push(b.toString());d.push("s");d.push(g.toString());d.push(" ");d.push(JSON.stringify(h));console.log(d.join(""))};e.logWarning=function(a,f){console.log("ProStyle Warning: "+a+" - "+f)};e.makeArray=function(a){return[].slice.call(a)};
e.querySelectorAll=function(a,f){void 0===f&&(f=document);try{return e.makeArray(f.querySelectorAll(a))}catch(b){e.logError("Util.querySelector",b.message)}};e.setElementText=function(a,f){a[void 0!==document.body.textContent?"textContent":"innerText"]=f};e.splitNoParens=function(a){var f=0,b=0,g=[];a=a.match(/([^()]+)|([()])/g);for(var h=a.length,d,c="",m=0;m<h;m++)d=a[m],"("===d?f++:")"===d&&b++,0!==f?(c+=d,f===b&&(g[g.length-1]+=c,f=b=0,c="")):g=g.concat(d.match(/([^,]+)/g));return g};e.svgAddClass=
function(a,f){e.svgRemoveClass(a,f);var b=a.getAttribute("class")||"",b=b+(0===b.length?"":" ")+f;a.setAttribute("class",b)};e.svgGetBounds=function(a){try{var f=a.getBBox()}catch(b){console.error(b)}0===f.width&&e.logWarning("svgGetBounds","getBBox returned an empty rect");return f};e.svgRemoveClass=function(a,f){var b=a.getAttribute("class")||"",b=b.replace(new RegExp("\\s?"+f),"");a.setAttribute("class",b)};var l=null;e.throttle=function(a,f){var b=this,g=arguments;return function(){clearTimeout(l);
l=setTimeout(function(){a.apply(b,g)},f)}}})(e.Util||(e.Util={}));(function(q){(function(e){e[e.Back=0]="Back";e[e.Bounce=1]="Bounce";e[e.Circle=2]="Circle";e[e.Curve=3]="Curve";e[e.Elastic=4]="Elastic";e[e.Expo=5]="Expo";e[e.Linear=6]="Linear";e[e.Sine=7]="Sine";e[e.SlowMo=8]="SlowMo";e[e.SlowMoBack=9]="SlowMoBack";e[e.Stepped=10]="Stepped";e[e.Stop=11]="Stop";e[e.StopAndReturn=12]="StopAndReturn"})(q.EazeEffect||(q.EazeEffect={}));(function(e){e[e.Less=0]="Less";e[e.Normal=1]="Normal";e[e.More=
2]="More";e[e.Extra=3]="Extra"})(q.EazeAmount||(q.EazeAmount={}));(function(e){e[e.In=0]="In";e[e.Out=1]="Out";e[e.InOut=2]="InOut"})(q.EazeEnding||(q.EazeEnding={}));var r=function(){function e(k,l,a){void 0===k&&(k=void 0);void 0===l&&(l=void 0);void 0===a&&(a=void 0);this.ease=this.ending=this.amount=this.effect=void 0;this.effect=void 0==k?e.DEFAULT_EFFECT:k;this.amount=void 0==l?e.DEFAULT_AMOUNT:l;this.ending=void 0==a?e.DEFAULT_ENDING:a;l="easeOut";2==this.ending?l="easeInOut":0==this.ending&&
(l="easeIn");6==k?this.ease=Linear.easeNone:0==k?this.setBackEase(l):1==k?this.ease=Bounce[l]:2==k?this.ease=Circ[l]:3==k?this.setCurveEase(l):4==k?this.setElasticEase(l):5==k?this.ease=Expo[l]:7==k?this.ease=Sine[l]:8==k?this.setSlowMoEase(0):9==k?this.setSlowMoEase(1):10==k?this.setSteppedEase():11==k?this.setSlowMoEase(2):12==k&&this.setSlowMoEase(2,!0)}e.prototype.setBackEase=function(e){this.ease=Back[e].config([1,1.9,3,4.1][this.amount])};e.prototype.setCurveEase=function(e){this.ease=[Power1,
Power2,Power3,Power4][this.amount][e]};e.prototype.setElasticEase=function(e){this.ease=Elastic[e].config([.8,1.1,1.25,1.75][this.amount],[.3,.26,.2,.15][this.amount])};e.prototype.setSlowMoEase=function(e,l){void 0===l&&(l=!1);var a=[.05,.5,.7,.9][this.amount],f=[.7,.6,.5,.4][this.amount];1==e?f=1/[.7,.682,.655,.64][this.amount]:2==e&&(f=1);this.ease=SlowMo.ease.config(a,f,l)};e.prototype.setSteppedEase=function(){this.ease=SteppedEase.config([3,6,12,24][this.amount])};e.getByText=function(k){k=
k.trim().toLowerCase().split(" ");var l=e.DEFAULT_EFFECT,a=e.DEFAULT_AMOUNT,f=e.DEFAULT_ENDING;k.forEach(function(b){b=b.trim();"back"==b&&(l=0);"bounce"==b&&(l=1);"circle"==b&&(l=2);"curve"==b&&(l=3);"elastic"==b&&(l=4);"expo"==b&&(l=5);"linear"==b&&(l=6);"sine"==b&&(l=7);"slowmo"==b&&(l=8);"slowmoback"==b&&(l=9);"stepped"==b&&(l=10);"stop"==b&&(l=11);"stopandreturn"==b&&(l=12);"less"==b&&(a=0);"normal"==b&&(a=1);"more"==b&&(a=2);"extra"==b&&(a=3);"in"==b&&(f=0);"out"==b&&(f=1);"inout"==b&&(f=2)});
return new e(l,a,f)};e.DEFAULT_EFFECT=5;e.DEFAULT_AMOUNT=1;e.DEFAULT_ENDING=1;e.DEFAULT=new e;return e}();q.Eaze=r;r=function(){function e(k,l){void 0===k&&(k=e.DEFAULT_WIDTH);void 0===l&&(l=e.DEFAULT_HEIGHT);this.width=k;this.height=l;this.width=Math.max(e.MIN,Math.min(k,e.MAX));this.height=Math.max(e.MIN,Math.min(l,e.MAX))}e.prototype.aspectRatio=function(){return this.height?this.width/this.height:1};e.prototype.getContainedSize=function(k){var l=this.aspectRatio();return k<l?new e(this.height*
k,this.height):k>l?new e(this.width,this.width/k):new e(this.width,this.height)};e.DEFAULT_WIDTH=1024;e.DEFAULT_HEIGHT=768;e.MIN=1;e.MAX=4096;return e}();q.Size=r;r=function(){function q(e,l){void 0===e&&(e=1);this.x=e;this.y=l;void 0===l&&(this.y=e)}q.fromJson=function(k){if(void 0===k||null===k)return new q;var l=100,a=void 0;return"number"===typeof k?new q(k/100,k/100):"string"===typeof k?(k=k.split(","),0<k.length&&(l=e.Util.convertToNumber(k[0].trim(),100)/100),1<k.length&&(a=e.Util.convertToNumber(k[1].trim(),
100)/100),new q(l,a)):k instanceof Array?(0<k.length&&(l=e.Util.convertToNumber((k[0]||"").toString().trim(),100)/100),1<k.length&&(a=e.Util.convertToNumber((k[1]||"").toString().trim(),100)/100),new q(l,a)):new q(e.Util.convertToNumber(k.x,100)/100,void 0===k.y?void 0:e.Util.convertToNumber(k.y,100)/100)};q.prototype.equals=function(e){return void 0===e?!1:this.x===e.x&&this.y===e.y};return q}();q.Scale=r;r=function(){function q(e,l,a){void 0===e&&(e=0);void 0===l&&(l=0);void 0===a&&(a=0);this.x=
e;this.y=l;this.z=a}q.fromJson=function(k){if(void 0===k||null===k)return new q;var l=0,a=0,f=0;return"number"===typeof k?new q(k):"string"===typeof k?(k=k.split(","),0<k.length&&(l=e.Util.convertToNumber(k[0].trim())),1<k.length&&(a=e.Util.convertToNumber(k[1].trim())),2<k.length&&(f=e.Util.convertToNumber(k[2].trim())),new q(l,a,f)):k instanceof Array?(0<k.length&&(l=e.Util.convertToNumber((k[0]||"").toString().trim())),1<k.length&&(a=e.Util.convertToNumber((k[1]||"").toString().trim())),2<k.length&&
(f=e.Util.convertToNumber((k[2]||"").toString().trim())),new q(l,a,f)):new q(e.Util.convertToNumber(k.x),e.Util.convertToNumber(k.y),e.Util.convertToNumber(k.z))};q.prototype.equals=function(e){return void 0===e?!1:this.x===e.x&&this.y===e.y&&this.z===e.z};return q}();q.Xyz=r;r=function(){function r(e,l,a,f){void 0===f&&(f=1);this.position=e;this.rotation=l;this.scale=a;this.opacity=f;Math.max(0,Math.min(f,1))}r.prototype.duplicate=function(){return new r(new q.Xyz(this.position.x,this.position.y,
this.position.z),new q.Xyz(this.rotation.x,this.rotation.y,this.rotation.z),new q.Scale(this.scale.x,this.scale.y),this.opacity)};r.prototype.adjust=function(e){this.position.x+=e.position.x;this.position.y+=e.position.y;this.position.z+=e.position.z;this.rotation.x+=e.rotation.x;this.rotation.y+=e.rotation.y;this.rotation.z+=e.rotation.z;this.scale.x=Math.max(0,this.scale.x*e.scale.x);this.scale.y=Math.max(0,this.scale.y*e.scale.y);this.opacity=Math.max(0,Math.min(this.opacity*e.opacity,1))};r.prototype.renderCss=
function(e,l,a){void 0===l&&(l={});void 0===a&&(a=!0);a&&(l.xPercent=-50,l.yPercent=-50);a=(e.width+e.height)/2;l.x=this.position.x/100*e.width;l.y=this.position.y/100*e.height;l.z=this.position.z/100*a;l.zIndex=10*this.position.z;l.rotationX=this.rotation.x;l.rotationY=this.rotation.y;l.rotationZ=this.rotation.z;l.scaleX=this.scale.x;l.scaleY=this.scale.y;l.autoAlpha=this.opacity;return l};r.fromJson=function(k){k=k||{};var l=new q.Xyz,a=new q.Xyz,f=new q.Scale,b=1,g;for(g in k)if(k.hasOwnProperty(g)){var h=
g.trim().toLowerCase();"position"===h||"pos"===h?l=q.Xyz.fromJson(k[g]):"rotation"===h||"rotate"===h||"rot"===h?a=q.Xyz.fromJson(k[g]):"scale"===h?f=q.Scale.fromJson(k[g]):"opacity"===h&&(h=k[g],"number"===typeof h?b=h/100:"string"===typeof h?b=e.Util.convertToNumber(h,100)/100:h instanceof Array?0<h.length&&(b=e.Util.convertToNumber(h[0],100)/100):b=e.Util.convertToNumber(h.percent,100)/100)}return new r(l,a,f,Math.max(0,Math.min(b,1)))};r.prototype.equals=function(e){return void 0===e||void 0===
e.position||void 0===e.rotation||void 0===e.scale||void 0===e.opacity||!1===this.position.equals(e.position)||!1===this.rotation.equals(e.rotation)||!1===this.scale.equals(e.scale)?!1:this.opacity===e.opacity};return r}();q.Placement=r;r=function(){function q(e,l,a,f,b,g){void 0===e&&(e=0);void 0===l&&(l=0);void 0===a&&(a=0);void 0===f&&(f="rgba(0,0,0,0.7)");void 0===b&&(b=0);void 0===g&&(g=!1);this.x=e;this.y=l;this.blur=a;this.color=f;this.spread=b;this.inset=g}q.prototype.render=function(k,l,a){var f=
(k+l)/2;k=Math.round(this.x/10*f)/10;l=Math.round(this.y/10*f)/10;var b=Math.round(this.blur/10*f)/10,f=Math.round(this.spread/10*f)/10;0===k&&0!==this.x&&(k=e.Util.getSign(this.x));0===l&&0!==this.y&&(l=e.Util.getSign(this.y));0===b&&0!==this.blur&&(b=e.Util.getSign(this.blur));0===f&&0!==this.spread&&(f=e.Util.getSign(this.spread));var b=Math.abs(b),g=[];a&&this.inset&&g.push("inset");g.push(k.toString()+"px");g.push(l.toString()+"px");g.push(b.toString()+"px");a&&g.push(f.toString()+"px");"number"===
typeof this.color?g.push("hsl("+Math.abs(this.color%360)+", 50%, 50%)"):g.push(this.color);return g.join(" ")};q.fromJson=function(k){k=k||[];if(!(k instanceof Array))return new q;var l=void 0,a=void 0,f=void 0,b=void 0,g=void 0,h=void 0;0<k.length&&void 0!==k[0]&&(l=e.Util.convertToNumber(k[0],0));1<k.length&&void 0!==k[1]&&(a=e.Util.convertToNumber(k[1],0));2<k.length&&void 0!==k[2]&&(f=Math.max(0,e.Util.convertToNumber(k[2],0)));3<k.length&&void 0!==k[3]&&(b=k[3]);4<k.length&&void 0!==k[4]&&(g=
e.Util.convertToNumber(k[4],0));5<k.length&&void 0!==k[5]&&(h=!!k[5]);return new q(l,a,f,b,g,h)};q.prototype.toJson=function(){var e=6;!0!==this.inset&&(e--,"rgba(0,0,0,0.5)"!==this.color&&(e--,0!==this.spread&&(e--,0!==this.blur&&e--)));var l=[];l.push(this.x);l.push(this.y);3<=e&&l.push(this.blur);4<=e&&l.push(this.spread);5<=e&&l.push(this.color.toString());6<=e&&l.push(!!this.inset);return l};q.prototype.equals=function(e){return void 0===e||e.x!==this.x||e.y!==this.y||e.blur!==this.blur||e.color!==
this.color||e.spread!==this.spread||e.inset!==this.inset?!1:!0};return q}();q.Shadow=r;r=function(){function e(k,l,a,f,b){this.current=k;this.future=l;this.futureOffset=a;this.past=f;this.pastOffset=b}e.fromJson=function(k){k=k||{};k.future=k.future||{};k.past=k.past||{};return new e(q.Placement.fromJson(k.current),q.Placement.fromJson(k.future),q.Placement.fromJson(k.future.offset),q.Placement.fromJson(k.past),q.Placement.fromJson(k.past.offset))};return e}();q.Stacks=r})(e.Types||(e.Types={}));
(function(e){(function(e){e.svg='<svg viewBox="0 0 880 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M866 476c9.333 6.667 14 14.667 14 24c0 9.333 -4.667 16.667 -14 22c0 0 -372 248 -372 248c-14.667 9.333 -27 11.333 -37 6c-10 -5.333 -15 -17.333 -15 -36c0 0 0 -482 0 -482c0 -18.667 5 -30.667 15 -36c10 -5.333 22.333 -3.333 37 6c0 0 372 248 372 248m-454 0c9.333 6.667 14 14.667 14 24c0 9.333 -4.667 16.667 -14 22c0 0 -360 248 -360 248c-13.333 9.333 -25.333 11.333 -36 6c-10.667 -5.333 -16 -17.333 -16 -36c0 0 0 -482 0 -482c0 -18.667 5.333 -30.667 16 -36c10.667 -5.333 22.667 -3.333 36 6c0 0 360 248 360 248" />  </g></svg>'})(e.fastForward||
(e.fastForward={}));(function(e){e.svg='<svg viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M 235.53172,912.14362 C 222.1737,911.65675 192.88213,908.97613 179.7563,907.0393 142.78725,901.5842 111.49908,892.23905 88.608558,879.81533 25.450284,845.53645 -2.363022,754.52992 11.595266,627.82372 25.966799,497.36601 84.182786,347.68421 159.54762,247.41661 197.38417,197.07776 237.03803,160.39415 278.89341,137.01036 374.98294,83.32699 506.9775,80.13258 647.3983,128.09214 c 49.55485,16.92505 104.25567,43.36958 148.76794,71.92026 67.85023,43.51989 124.36319,97.22188 156.87086,149.06805 18.94366,30.21307 31.87969,63.3221 38.06746,97.43144 2.33759,12.88545 2.53863,16.10095 2.59068,41.42752 0.0635,30.88207 -0.93881,40.20361 -6.88779,64.06813 -4.43071,17.77393 -9.49209,31.52197 -18.08915,49.13496 -8.23109,16.86308 -14.88167,27.71 -25.9912,42.39094 C 899.81543,700.24002 812.14549,761.98761 706.85748,809.66081 557.06683,877.48427 374.39035,917.2046 235.53172,912.14362 z m 20.199,-175.08151 c 6.38062,-2.666 6.29534,-1.92178 6.29534,-54.94359 0,-44.83349 0.10257,-47.73586 1.686,-47.70791 0.92731,0.0164 4.93759,0.46167 8.91174,0.9896 31.04792,4.12438 61.94393,2.5304 86.22704,-4.44863 37.74398,-10.8477 65.19426,-39.86566 76.5239,-80.89416 5.21836,-18.89745 5.3677,-20.86694 5.3677,-70.78889 0,-44.41671 -0.10617,-47.267 -2.14793,-57.66335 -10.62749,-54.11369 -43.50561,-87.90953 -95.15856,-97.81468 -34.23802,-6.56561 -88.65352,-3.28975 -141.91157,8.54321 -17.90378,3.97789 -23.30288,6.3891 -24.9484,11.14185 -0.87518,2.52775 -1.1629,48.97756 -1.2043,194.41663 -0.0485,170.42766 0.10664,191.43468 1.43437,194.23266 1.3611,2.86829 3.29589,4.39796 7.18213,5.67829 0.79484,0.26186 16.52472,0.51032 34.95531,0.55216 26.91396,0.0611 34.15522,-0.19347 36.78723,-1.29319 z m 36.16169,-170.6532 c -0.79483,-0.16956 -7.83992,-0.8255 -15.65574,-1.45764 l -14.21061,-1.14936 0,-84.09937 0,-84.09937 2.64944,-0.54561 c 4.32406,-0.89047 29.87188,-2.4793 39.7415,-2.47153 19.88057,0.0156 31.80455,5.28992 40.05624,17.71784 7.62813,11.4888 9.88532,23.73156 10.67225,57.88521 0.94764,41.1288 -1.53911,63.6562 -8.46381,76.6734 -5.72666,10.76513 -16.75587,18.88668 -28.66728,21.10972 -4.72311,0.88147 -22.63346,1.1809 -26.12199,0.43671 z m 525.851,69.28618 c 42.38495,-6.01923 75.22316,-29.25194 92.24766,-65.26424 11.84331,-25.05233 14.87524,-43.63329 14.87524,-91.16232 0,-40.01963 -1.78087,-55.69933 -8.65755,-76.22473 -13.90501,-41.50378 -45.23465,-69.21991 -89.13065,-78.85057 -28.6265,-6.28057 -64.499,-4.3605 -90.6127,4.85004 -45.55567,16.06787 -72.81618,52.13077 -79.95784,105.77608 -1.95361,14.67474 -1.92487,74.08051 0.043,89.09299 5.72313,43.65858 25.18804,75.73978 57.80606,95.27346 26.94864,16.13849 64.15813,22.08028 103.38668,16.50929 z m -38.93145,-72.11263 c -13.50019,-2.93712 -23.06811,-10.72915 -29.29281,-23.85582 -6.58723,-13.89118 -7.22294,-19.21222 -7.22294,-60.45811 0,-41.45888 0.64564,-46.8115 7.29042,-60.44081 8.16765,-16.7529 20.8752,-24.30337 40.94711,-24.32965 17.26097,-0.0226 28.83801,5.77322 37.13719,18.59198 8.46721,13.0783 10.47888,25.78284 10.47888,66.17848 0,38.81099 -1.53158,49.75666 -8.93668,63.86774 -8.79754,16.76446 -29.22827,25.05258 -50.40117,20.44619 z m -221.41931,65.75453 3.2969,-3.59872 0.03,-107.19579 0.03,-107.19581 8.93659,-4.08853 c 20.61319,-9.43061 36.60854,-13.59307 55.5365,-14.45218 11.51659,-0.52274 12.1389,-0.6588 14.69231,-3.2122 l 2.66628,-2.66634 0,-29.49265 c 0,-32.3359 -0.065,-32.73152 -5.87582,-35.73638 -4.84819,-2.50711 -19.8152,-1.095 -36.08282,3.40434 -9.76904,2.70194 -27.10272,11.03633 -34.87766,16.76991 -3.31328,2.44336 -6.2397,4.44247 -6.50316,4.44247 -0.26345,0 -0.47901,-3.43499 -0.47901,-7.63334 0,-7.23931 -0.15301,-7.78635 -2.9644,-10.59774 l -2.96441,-2.96439 -36.03933,0 -36.03934,0 -3.14635,2.81116 -3.14635,2.81117 -0.28573,145.31628 c -0.1992,101.30298 0.027,146.3959 0.74674,148.88076 1.02228,3.52923 4.48752,6.81938 8.20987,7.79506 1.05978,0.27777 17.45985,0.43678 36.44462,0.35334 l 34.51776,-0.1517 3.29689,-3.59872 z" />  </g></svg>'})(e.logo||
(e.logo={}));(function(e){e.svg='<svg viewBox="0 0 530 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M440 150c60 0 90 21.333 90 64c0 0 0 570 0 570c0 44 -30 66 -90 66c-60 0 -90 -22 -90 -66c0 0 0 -570 0 -570c0 -42.667 30 -64 90 -64c0 0 0 0 0 0m-350 0c60 0 90 21.333 90 64c0 0 0 570 0 570c0 44 -30 66 -90 66c-60 0 -90 -22 -90 -66c0 0 0 -570 0 -570c0 -42.667 30 -64 90 -64c0 0 0 0 0 0" />  </g></svg>'})(e.pause||(e.pause={}));(function(e){e.svg='<svg viewBox="0 0 500 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M486 474c9.333 6.667 14 15.333 14 26c0 9.333 -4.667 17.333 -14 24c0 0 -428 266 -428 266c-16 10.667 -29.667 12.667 -41 6c-11.333 -6.667 -17 -20 -17 -40c0 0 0 -514 0 -514c0 -20 5.667 -33.333 17 -40c11.333 -6.667 25 -4.667 41 6c0 0 428 266 428 266" />  </g></svg>'})(e.play||
(e.play={}));(function(e){e.svg='<svg viewBox="0 0 600 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M174 500c0 -9.333 4.667 -17.333 14 -24c0 0 364 -228 364 -228c13.333 -9.333 24.667 -11 34 -5c9.333 6 14 17.667 14 35c0 0 0 442 0 442c0 17.333 -4.667 29 -14 35c-9.333 6 -20.667 4.333 -34 -5c0 0 -364 -228 -364 -228c-9.333 -6.667 -14 -14 -14 -22c0 0 0 0 0 0m-174 -234c0 -38.667 25.333 -58 76 -58c49.333 0 74 19.333 74 58c0 0 0 466 0 466c0 38.667 -24.667 58 -74 58c-50.667 0 -76 -19.333 -76 -58c0 0 0 -466 0 -466c0 0 0 0 0 0" />  </g></svg>'})(e.toStart||
(e.toStart={}))})(e.Svg||(e.Svg={}));(function(e){var r=function(){return function(e){this.initPropertyLists=e;this.init=e[0]}}();e.Model=r})(e.Models||(e.Models={}));(function(e){e.rootUrl=void 0;e.Config={"default":{auto:{start:!0,advance:!1,advanceDelay:0,restart:!0,resize:!0},controls:{type:"track",autoHide:!0,color:"#EEE",highlightColor:"#FFF",backColor:"#094766",stepColor1:"#0c5f89",stepColor2:"#EEE",startHint:!0},keyboard:!1,touch:!1,mouseWheel:!1,debugBar:!1}}})(e.Stories||(e.Stories={}))})(ProStyle||
(ProStyle={}));var __extends=this.__extends||function(e,q){function r(){this.constructor=e}for(var u in q)q.hasOwnProperty(u)&&(e[u]=q[u]);r.prototype=q.prototype;e.prototype=new r};
(function(e){function q(a){if(void 0!==a.dataset.prostyle){"relative"!==a.style.position&&"absolute"!==a.style.position&&(a.style.position="relative");var e=document.createElement("progress");e.value=1;e.max=2;e.style.position="absolute";e.style.left="50%";e.style.top="50%";e.style.transform="translate(-50%,-50%)";a.innerHTML="";a.appendChild(e)}}function r(){var a=document.body;if(a)if(void 0!==a.dataset.prostyle)q(a);else for(var a=document.getElementsByTagName("div"),e=0;e<a.length;e++)q(a[e])}
function u(a){var f=a.dataset.prostyle;if(void 0!==f){var b=e.Stories[f];if(void 0===b||void 0===b.story)a.innerHTML="<strong style='background-color: #FFF;color:#C00'>Missing story at ProStyle.Stories."+f+"</strong>";else{var g=void 0,h=a.dataset.prostyleConfig;void 0!==h&&(g=e.Stories.Config[h]);g=g||b.config||e.Stories.Config[f]||e.Stories.Config.default;a.innerHTML="";f=e.Serialization.StoryReader.read(b.story);g=new e.Render.Canvas(f,a,g);a.proStyleCanvas=g}}}function k(){var a=document.body;
if(a)if(void 0!==a.dataset.prostyle)u(a);else for(var a=document.getElementsByTagName("div"),e=0;e<a.length;e++)u(a[e])}function l(){r();window.addEventListener("load",function(){void 0===e.Stories.rootUrl&&(e.Stories.rootUrl=window.Pro_Style_Stories_rootUrl);r();k()})}(function(a){var f=function(b){function a(h,d,c){b.call(this,[h]);this.padding=d;this.imageRootUrl=c;this.setAdjustedImageRootUrl(c)}__extends(a,b);a.prototype.setAdjustedImageRootUrl=function(b){if(b&&(b=b.toString().trim(),e.Util.isAbsoluteUrl(b))){this.adjustedImageRootUrl=
b;return}var d=e.Stories.rootUrl;if(d){var c=d.lastIndexOf("/")===d.length-1;b&&(d=0===b.indexOf("/")?c?d+b.substr(1):d+b:c?d+b:d+("/"+b))}else d=b;d&&d.lastIndexOf("/")!==d.length-1&&(d+="/");this.adjustedImageRootUrl=d};a.prototype.adjustBackgroundImage=function(b,d){var c=this,m=[];e.Util.splitNoParens(b).forEach(function(d){d=d.trim();0===d.toLowerCase().indexOf("url(")&&(d="url("+c.adjustImageUrl(d)+")");m.push(d)});return m.join(",")};a.prototype.adjustImageUrl=function(b){0===b.toLowerCase().indexOf("url(")&&
(b=b.substr(4,b.length-5).trim());this.adjustedImageRootUrl&&(e.Util.isAbsoluteUrl(b)||(b=0===b.indexOf("/")?this.adjustedImageRootUrl+b.substr(1):this.adjustedImageRootUrl+b));return b};return a}(a.Model);a.Canvas=f;f=function(b){function a(h,d,c){b.call(this,[h]);this.aspectRatio=d;this.padding=c}__extends(a,b);return a}(a.Model);a.Frame=f;f=function(){return function(b,a,h,d){this.canvas=b;this.frame=a;this.flows=h;this.classes=d}}();a.Story=f;(function(b){var a=function(){function b(d,c){this.propertyTypes=
d;this.properties=c}b.prototype.getPropertyOfType=function(d){for(var c=0;c<this.properties.length;c++){var m=this.properties[c];if(m.type===d)return m}};b.prototype.hasAnythingSet=function(){for(var d=0;d<this.properties.length;d++)for(var c=this.properties[d],m=0;m<c.type.variableTypes.length;m++)if(void 0!==c[c.type.variableTypes[m].jsonNames[0]].getValue())return!0;return!1};return b}();b.PropertyList=a})(a.Properties||(a.Properties={}));f=function(b){function g(a,d){b.call(this,[a]);this.flow=
d;this.steps=[];this.items=[];this.story=d.story}__extends(g,b);g.prototype.insertStep=function(b){e.Util.insertIntoArray(this.steps,b,new a.Step);this.canvasScriptSet.insertStep(b);this.frameScriptSet.insertStep(b);this.pageScriptSet.insertStep(b);this.items.forEach(function(d){d.scriptSets.forEach(function(c){c.insertStep(b)})})};g.prototype.deleteStep=function(b){this.steps.splice(b,1);this.canvasScriptSet.deleteStep(b);this.frameScriptSet.deleteStep(b);this.pageScriptSet.deleteStep(b);this.items.forEach(function(d){d.scriptSets.forEach(function(c){c.deleteStep(b)})})};
g.prototype.deleteItem=function(b){this.items.splice(b,1)};return g}(a.Model);a.Page=f;(function(b){var a=function(){function b(d,c,m,a,h){void 0===h&&(h=void 0);this.story=d;this.flowType=c;this.placement=m;this.pageAspectRatio=a;this.defaultPageClass=h;this.pages=[]}b.prototype.getDefaultPageClassName=function(){return this.defaultPageClass};b.prototype.getDefaultPageClassValue=function(){};return b}();b.Flow=a})(a.Flows||(a.Flows={}));(function(b){var a=function(b){function d(c,m,d,a){b.call(this,
c,"simple",m,a,d)}__extends(d,b);d.prototype.getDefaultPageClassName=function(){return this.defaultPageClass||"simpleFlowPage"};return d}(b.Flow);b.SimpleFlow=a})(a.Flows||(a.Flows={}))})(e.Models||(e.Models={}));(function(a){(function(a){(function(b){var a=function(b){function d(c,m,d,a){b.call(this,c,m,d,a);this.flowType="unknown"}__extends(d,b);return d}(e.Models.Flows.SimpleFlow);b.Extension=a})(a.unknown||(a.unknown={}))})(a.Flows||(a.Flows={}))})(e.Extensions||(e.Extensions={}));(function(a){var f=
e.Models.Properties,b=function(){function b(a,d){this.model=a;this.element=d;this.div=void 0;if(d instanceof HTMLDivElement||d instanceof HTMLBodyElement)this.div=d;d.proCache={}}b.prototype.initializeProperties=function(a,d,c,m,e,t,n,p){var z=this;void 0===n&&(n=void 0);void 0===p&&(p=void 0);TweenMax.set(d,{clearProps:"all"});void 0!==n&&TweenMax.set(d,n);var w=[];for(n=0;n<d.length;n++){var k={force3D:!0,element:d[n],elementIndex:n};t&&(k.xPercent=-50,k.yPercent=-50);w.push(k)}var l=[];e.properties.forEach(function(c){l["prostyle_"+
c.type.jsonNames[0]]=c});e.propertyTypes.forEach(function(d){var m=l["prostyle_"+d.jsonNames[0]];void 0===m&&(m=new f.Property(d));m.writeCssBuckets(a,z,c,w,!0)});b.postProcessCssBuckets(w,p,e.properties,c);for(n=0;n<d.length;n++)m.set(d[n],w[n],"initialize")};b.prototype.generateEventTimeline=function(b,d,c,m,e,t,n){var p=this;void 0===n&&(n=void 0);var g=new TimelineMax;m.actions.forEach(function(m){if(0===m.actionType){var f=g.totalDuration(),k=a.Actions.SetPropertiesAction.generateTimeline(b,
p,d,m,g,c,n);void 0!==k&&(m=g.totalDuration(),(k=0<k?b.items[k-1].div:void 0)&&e.seek(t+"+="+m),m=new TimelineMax,a.Actions.SetPropertiesAction.generateMoveTo(b.div,k,m),g.add(m,f))}});e.add(g,t)};b.prototype.generateActionsForStep=function(b,d,c,m,a,e,n,p){var g=this;void 0===p&&(p=void 0);n.scripts.forEach(function(n){1===n.type&&n.stepIndex===a&&g.generateEventTimeline(b,d,c,n,m,e,p)})};b.postProcessCssBuckets=function(b,d,c,m){for(var a=0;a<b.length;a++){var e=b[a],n=e.element.proCache;void 0!==
n&&(void 0!==e.width&&(n.width=e.width),void 0!==e.height&&(n.height=e.height))}d&&d(c,b,m);b.forEach(function(c){delete c.element;delete c.elementIndex})};return b}();a.Visual=b;(function(b){var h=e.Util,d=function(c){function m(m,d,b){void 0===b&&(b=void 0);c.call(this,m,b||h.createChildDivElement(d.div,"prostyle prostyle-item"));this.item=m;this.itemSetElem=d}__extends(m,c);m.prototype.initializeItem=function(c,m){var d=m.getContainedSize(this.item.itemSet.flow.pageAspectRatio);this.initializeProperties(this.item.itemSet.flow.story,
[this.element],d,c,this.item.init,!1)};m.prototype.generateStepActions=function(c,m,d,b,a){this.generateActionsForStep(c,[this.element],m,d,b,a,this.item.scriptSet)};return m}(a.Visual);b.Item=d})(a.Items||(a.Items={}))})(e.Render||(e.Render={}));(function(a){(function(a){var b=function(){function b(a){var d=this;this.type=a;a.variableTypes.forEach(function(c){d[c.jsonNames[0]]=c.createVariable()})}b.prototype.getVariable=function(b){return this[b]};b.prototype.renderLabel=function(){return this.type.renderLabel(this)};
b.prototype.writeCssBuckets=function(b,d,c,m,a){var e=this;this.type.variableTypes.forEach(function(n){n=e[n.jsonNames[0]];n.type.writeCssBuckets(b,d,c,n,m,a)})};return b}();a.Property=b})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(){function a(d,c,m,b,h,n){this.label=d;this.jsonNames=c;this.cssName=m;this.text=b;this.defaultValue=h;this.alwaysInitializeCss=n;void 0===h&&e.Util.logWarning("VariableType<T>",m+" has a default value of undefined.")}a.prototype.createVariable=
function(){return new b.Variable(this)};a.prototype.scrubValue=function(d){return d};a.prototype.writeCssBuckets=function(d,c,m,b,a,h){var e=this;if(void 0!==this.cssName){var g=b.getValue(h);void 0!==g&&(h&&g===this.defaultValue&&!this.alwaysInitializeCss||a.forEach(function(b){e.writeCssBucket(d,c,m,b,g)}))}};a.prototype.writeCssBucket=function(d,c,m,b,a){b[this.cssName]=a};return a}();b.VariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=
function(b){function d(c,m,d,a,e){b.call(this,c,m,d,"",a,e)}__extends(d,b);d.prototype.scrubValue=function(c){return void 0===c?"":c.toString()};return d}(b.VariableType);b.StringVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,m,d,a,e){b.call(this,c,m,d,a,e)}__extends(d,b);d.prototype.writeCssBucket=function(c,m,d,b,a){b[this.cssName]=c.canvas.adjustBackgroundImage(a,d)};return d}(b.StringVariableType);b.BackgroundImageVariableType=
a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,m,d,a,e,p){void 0===p&&(p=!1);b.call(this,c,m,d,"",!1,p);this.falseValue=a;this.trueValue=e}__extends(d,b);d.prototype.scrubValue=function(c){return!!c};d.prototype.writeCssBucket=function(c,d,b,a,h){a[this.cssName]=h?this.trueValue:this.falseValue};return d}(b.VariableType);b.BooleanVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=
function(b){function d(c,d,a,e,n,p){b.call(this,c,d,a,e,p);this.enumValues=n}__extends(d,b);d.prototype.scrubValue=function(c){if(void 0===c)return this.defaultValue;c=c.toString().trim().toLocaleLowerCase();for(var d=0;d<this.enumValues.length;d++)if(c===this.enumValues[d])return c;for(d=0;d<this.enumValues.length;d++)if(0===this.enumValues[d].indexOf(c))return this.enumValues[d];return this.defaultValue};d.prototype.getValueByIndex=function(c){return 0>c||c>=this.enumValues.length?void 0:this.enumValues[c]};
return d}(b.StringVariableType);b.EnumVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(){b.call(this,"bullets",["style"],"listStyleType","none","arabic-indic armenian bengali cambodian circle cjk-ideographic decimal decimal-leading-zero devanagari disc georgian gujarati gurmukhi hebrew hiragana hiragana-iroha kannada katakana katakana-iroha khmer lao lower-alpha lower-armenian lower-greek lower-latin lower-roman malayalam mongolian myanmar oriya persian telugu thai tibetan square upper-alpha upper-latin upper-roman".split(" "),
!1)}__extends(d,b);d.prototype.writeCssBucket=function(c,d,b,a,h){a[this.cssName]=h;a.display="none"==h?"block":"list-item"};return d}(b.EnumVariableType);b.BulletsVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n){b.call(this,c,d,a,e,n)}__extends(d,b);d.prototype.scrubValue=function(c){return"boolean"===typeof c?c?"white":this.defaultValue:"number"===typeof c?"hsl("+Math.abs(c%360).toString()+", 50%, 50%)":
"string"===typeof c?c:"black"};return d}(b.StringVariableType);b.ColorVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n,p,g,f,k){b.call(this,c,d,a,f,p,k);this._minValue=e;this._maxNumber=n;this._decimalPlaces=g}__extends(d,b);d.prototype.scrubValue=function(c){c=e.Util.convertToNumber(c,this.defaultValue);var d=Math.pow(10,this._decimalPlaces);c=Math.round(c*d)/d;return c=Math.max(this._minValue,Math.min(c,
this._maxNumber))};return d}(b.VariableType);b.NumberVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n,p,g,f,k){b.call(this,c,d,a,e,n,p,g,f,k)}__extends(d,b);d.prototype.writeCssBucket=function(c,d,b,a,h){a[this.cssName]=h/100*((b.height+b.width)/2)+1;"z"===this.cssName&&(a.zIndex=h+1)};return d}(b.NumberVariableType);b.ContainerDepthPctVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||
(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n,p,g,f,k){b.call(this,c,d,a,e,n,p,g,f,k)}__extends(d,b);d.prototype.writeCssBucket=function(c,d,b,a,h){c=h/100*b.height;0<h&&1>c&&(c=1);a[this.cssName]=c};return d}(b.NumberVariableType);b.ContainerHeightPctVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n,p,g,f,k){b.call(this,c,d,a,e,n,p,g,f,k)}__extends(d,b);d.prototype.writeCssBucket=
function(c,d,b,a,e){a[this.cssName]=e/100*b.width};return d}(b.NumberVariableType);b.ContainerWidthPctVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=e.Types,h=function(d){function c(){d.call(this,"ease",["ease"],"ease","",a.Eaze.DEFAULT,!1)}__extends(c,d);c.prototype.scrubValue=function(c){if("string"===typeof c)return a.Eaze.getByText(c)};c.prototype.writeCssBucket=function(c,d,b,a,e){a[this.cssName]=e.ease};return c}(b.VariableType);
b.EaseVariableType=h})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n,p,g,f,k,l,q){b.call(this,c,d,a,e,n,p,g,l,q);this.inverted=k;this.offset=f}__extends(d,b);d.prototype.writeCssBucket=function(c,d,b,a,e){e+=this.offset;this.inverted&&(e=-e);a[this.cssName]=e};return d}(b.NumberVariableType);b.NumberOffsetVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=
e.Types,h=function(d){function c(c,b){void 0===b&&(b=!1);d.call(this,c?"transform origin":"perspective origin",c?["transformOrigin","origin"]:["perspectiveOrigin","origin"],c?"transformOrigin":"perspectiveOrigin","",new a.Xyz(0,0,0),!1);this.transform=c;this.useContainer=b}__extends(c,d);c.prototype.scrubValue=function(c){return"boolean"==typeof c?this.defaultValue:"number"==typeof c?new a.Xyz(c):"string"==typeof c?this.scrubArray(c.split(" ")):c instanceof Array?this.scrubArray(c):this.scrubArray([c.x,
c.y,c.z])};c.prototype.scrubArray=function(c){var d=new a.Xyz(this.defaultValue.x,this.defaultValue.y,this.defaultValue.z);0<c.length&&(d.x=this.scrubString(c[0]));1<c.length&&(d.y=this.scrubString(c[1]));this.transform&&2<c.length&&(d.z=e.Util.convertToNumber(c[2],0,!0));return d};c.prototype.scrubString=function(c){c=(c||"").toString().trim().toLocaleLowerCase();return"left"===c?0:"right"===c?100:"top"===c?0:"bottom"===c?100:"center"===c?50:e.Util.convertToNumber(c,0,!0)};c.prototype.writeCssBuckets=
function(c,d,b,a,e,h){var g=this;c=a.getValue(h);if(void 0!==c&&(!h||!c.equals(this.defaultValue)||this.alwaysInitializeCss)){var f;f=this.useContainer?Math.round(c.x/100*b.width)+"px "+Math.round(c.y/100*b.height)+"px":Math.round(100*c.x)/100+50+"% "+(Math.round(100*c.y)/100+50)+"%";this.transform&&(f+=" "+Math.round((b.height+b.width)/2*c.z/100)+"px");e.forEach(function(c){c[g.cssName]=f})}};return c}(b.VariableType);b.OriginVariableType=h})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties=
{}));(function(a){(function(b){var a=function(b){function d(c,d,a,e,n,p,g){b.call(this,c,d,a,e,n,p,0,"%",g)}__extends(d,b);d.prototype.writeCssBucket=function(c,d,b,a,e){a[this.cssName]=e/100};return d}(b.NumberVariableType);b.PercentVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(c,d){b.call(this,"shadow",["value"],c,"",[],!1);this.isBoxShadow=d}__extends(d,b);d.prototype.scrubValue=function(c){if(void 0===
c||!(c instanceof Array)||0===c.length)return[];var d=[];c[0]instanceof Array?c.forEach(function(c){d.push(e.Types.Shadow.fromJson(c))}):d.push(e.Types.Shadow.fromJson(c));return d};d.prototype.writeCssBucket=function(c,d,b,a,e){var h=this,g=[];e.forEach(function(c){g.push(c.render(b.width,b.height,h.isBoxShadow))});a[this.cssName]=0===g.length?"none":g.join(", ")};return d}(b.VariableType);b.ShadowVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=
function(b){function d(){b.call(this,"align",["align"],"textAlign","inherit",["left","center","right","justify"],!1)}__extends(d,b);return d}(b.EnumVariableType);b.TextAlignVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){(function(b){var a=function(b){function d(){b.call(this,"width",["width"],"width",0,Number.MAX_VALUE,Number.MAX_VALUE,2,"",!1)}__extends(d,b);d.prototype.writeCssBucket=function(c,d,b,a,e){e===Number.MAX_VALUE?a.clearProps="whiteSpace,width":
(a.width=e/100*b.width,a.whiteSpace="normal")};return d}(b.NumberVariableType);b.TextWidthVariableType=a})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){var b=function(){function b(a,d,c){this.label=a;this.jsonNames=d;this.variableTypes=c}b.prototype.createPropertyFromArray=function(b){e.Util.logWarning("PropertyType.createPropertyFromArray()","Abstract method called");return new a.Property(this)};b.prototype.createPropertyFromNumber=function(b){e.Util.logWarning("PropertyType.createPropertyFromNumber()",
"Abstract method called");return new a.Property(this)};b.prototype.createPropertyFromString=function(b){e.Util.logWarning("PropertyType.createPropertyFromString()","Abstract method called");return new a.Property(this)};b.prototype.createPropertyFromBoolean=function(b){var d=new a.Property(this);!1===b&&this.variableTypes.forEach(function(c){d[c.jsonNames[0]].setValue(c.defaultValue)});return d};b.prototype.createPropertyFromObject=function(b){var d=new a.Property(this);if(void 0===b)return d;var c=
e.Util.lowercaseProperties(b);this.variableTypes.forEach(function(b){for(var a=0;a<b.jsonNames.length;a++){var e=b.jsonNames[a];if(c.hasOwnProperty(e)){d[b.jsonNames[0]].setValue(c[e]);break}}});return d};b.prototype.renderLabel=function(b){e.Util.logWarning("PropertyType.renderLabel()","Abstract method called");return"xxx"};b.prototype.countOfValues=function(b){var d=0;this.variableTypes.forEach(function(c){void 0!==b[c.jsonNames[0]].getValue()&&d++});return d};b.prototype.renderVariables=function(b,
d,c){var a=[];this.variableTypes.forEach(function(e){e=b[e.jsonNames[0]].render(d,c);void 0!==e&&a.push(e)});var e=a.join(", ");0<e.length&&(e=(d?" ":": ")+e);return this.label+e};return b}();a.PropertyType=b})(a.Properties||(a.Properties={}));(function(e){var b=function(b){function a(d,c,m,e,h){b.call(this,e);this.itemSet=d;this.itemType=c;this.typeLabel=m;this.scriptSets=h;this.scriptSet=h[0]}__extends(a,b);a.prototype.getScriptSet=function(d){var c=this.scriptSets;if(0>d||d>=c.length)d=0;return c[d]};
a.prototype.getCountOfStepsUsed=function(){var d=1;this.scriptSets.forEach(function(c){d=Math.max(d,c.getCountOfStepsUsed())});return d};return a}(a.Model);e.Item=b})(a.Items||(a.Items={}))})(e.Models||(e.Models={}));(function(a){(function(a){var b=function(b){function a(d,c){b.call(this,d,c);this.sequencedItem=d}__extends(a,b);a.prototype.moveToSubStep=function(d,c,b){};a.prototype.getCountOfSubSteps=function(){return 0};return a}(a.Item);a.SequencedItem=b})(a.Items||(a.Items={}))})(e.Render||(e.Render=
{}));(function(a){(function(a){var b=function(){return function(b,a){this.scriptSet=b;this.type=a;this.y=this.x=0}}();a.Script=b})(a.Scripts||(a.Scripts={}));(function(a){var b=function(){function b(a,d,c){this.itemSet=a;this.name=d;this.itemProperties=c;this.scripts=[]}b.prototype.getCountOfStepsUsed=function(){var b=0;this.scripts.forEach(function(d){1===d.type&&(b=Math.max(b,d.stepIndex))});return b+1};b.prototype.insertStep=function(b){};b.prototype.deleteStep=function(b){var d=this,c=[];this.scripts.forEach(function(d){1===
d.type&&d.stepIndex===b&&c.push(d)});c.forEach(function(c){c=d.scripts.indexOf(c);d.scripts.splice(c,1)})};return b}();a.ScriptSet=b})(a.Scripts||(a.Scripts={}))})(e.Models||(e.Models={}));(function(a){(function(a){(function(b){var a=e.Models,h=a.Properties,d=a.Scripts,a=function(c){function b(a,m){c.call(this,a,"unknown","Unknown",[new h.PropertyList([],[])],[new d.ScriptSet(a,"unknown",[])]);this.unknownType=m}__extends(b,c);return b}(a.Items.Item);b.Extension=a})(a.unknown||(a.unknown={}))})(a.Items||
(a.Items={}))})(e.Extensions||(e.Extensions={}));(function(a){(function(a){(function(b){b.readJson=function(a,e){console.log(e);return new b.Extension(a,e.itemType)}})(a.unknown||(a.unknown={}))})(a.Items||(a.Items={}))})(e.Extensions||(e.Extensions={}));(function(a){var f=e.Util,b=function(){function b(){}b.read=function(h,d){d=d||{};var c=(d.itemType||"text").trim().toLowerCase(),m=a.Items["read_"+c];if(void 0===m){if((c=b.lookupExtension(c))&&c.readJson)return c.readJson(h,d);f.logError("ItemReader.read()",
"Unknown Item Type ("+d.itemType+")");return e.Extensions.Items.unknown.readJson(h,d)}return m(h,d)};b.lookupExtension=function(b){for(var d in e.Extensions.Items){var c=d.toLowerCase();if(b===c)return e.Extensions.Items[d]}};return b}();a.ItemReader=b})(e.Serialization||(e.Serialization={}));(function(a){var f=e.Util,b=function(b){function h(d,c,m,e){var t=this;b.call(this,d,f.createChildDivElement(c.div,"prostyle prostyle-page"));this.page=d;this.flowElem=c;this.flowIndex=m;this.pageIndex=e;this.steps=
[];this.items=[];h.createItems(this,d.items);d.steps.forEach(function(c,d){var b=[];t.items.forEach(function(c){c instanceof a.Items.SequencedItem&&c.sequencedItem.sequenceOnStepIndex===d&&b.push(c)});t.steps.push(new a.Step(c,m,e,d,b))})}__extends(h,b);h.createItems=function(d,c){c instanceof Array&&c.forEach(function(c){var b=void 0,b="text"===c.itemType?a.Items.TextItem:"image"===c.itemType?a.Items.ImageItem:"layer"===c.itemType?a.Items.LayerItem:e.Serialization.ItemReader.lookupExtension(c.itemType.toLowerCase()).Renderer;
d.items.push(new b(c,d))})};h.prototype.generateStepsActions=function(d,c){var b=this;this.steps.forEach(function(a,e){a.startTime=(void 0===c?0:c.stopTime)+.01;c=a;0<e&&d.addLabel(a.startLabel,a.startTime);var h=b.flowElem.cameraElem.size,p=b.flowElem.cameraElem.frameElem.canvasElem;p.generateActionsForStep(b,[p.div],h,d,e,a.startLabel,b.page.canvasScriptSet);p=b.flowElem.cameraElem.frameElem;p.generateActionsForStep(b,[p.div],h,d,e,a.startLabel,b.page.frameScriptSet);p=b;p.generateActionsForStep(b,
[p.div],h,d,e,a.startLabel,b.page.pageScriptSet);var g=b.flowElem.cameraElem.size.getContainedSize(b.page.flow.pageAspectRatio);b.items.forEach(function(c){c.generateStepActions(b,g,d,e,a.startLabel)});a.stopTime=d.duration();a.stopTime<a.startTime&&(a.stopTime=a.startTime);d.addLabel(a.stopLabel,a.stopTime);a.time=a.stopTime-a.startTime});return c};return h}(a.Visual);a.Page=b;(function(b){var h=e.Util,d=function(c){function b(d,m,e){var p=this;c.call(this,m.model,h.createChildDivElement(m.div,"prostyle prostyle-flow"));
this.flow=d;this.cameraElem=m;this.flowIndex=e;this.pageElems=[];d.pages.forEach(function(c,b){p.pageElems.push(new a.Page(c,p,e,b))})}__extends(b,c);b.prototype.initializePlacement=function(c){this.initializePerspective();this.initializeFlowPlacement(c);this.initializePages(c)};b.prototype.initializePerspective=function(){var c=this.cameraElem.size;TweenLite.set(this.div,{perspective:(c.width+c.height)/2})};b.prototype.initializeFlowPlacement=function(c){var b={},d=this.flow.placement.position,a=
this.cameraElem.frameElem.canvasElem.size;b.xPercent=-50;b.yPercent=-50;b.x=d.x/100*a.width;b.y=d.y/100*a.height;c.set(this.div,b,"initialize")};b.prototype.generateCameraMovement=function(c,b){var d={},a=this.flow.placement.position,m=this.cameraElem.frameElem.canvasElem.size;d.xPercent=-50;d.yPercent=-50;d.x=a.x/100*-m.width;d.y=a.y/100*-m.height;d.ease=Expo.easeOut;c.to(this.cameraElem.div,1,d,b)};b.prototype.initializePages=function(c){h.logWarning("Render.Flows.Flow.initializePages()","Abstract method called")};
b.prototype.generatePageMovement=function(c,b,d){h.logWarning("Render.Flows.Flow.generatePageMovement()","Abstract method called")};b.prototype.generateStepsActions=function(c,b){var d=this;this.pageElems.forEach(function(a,m){var e=a.steps[0].startLabel;c.addLabel(e,"+=0.01");0===m&&(d.generateCameraMovement(c,e),e="initialize");d.generatePageMovement(c,e,m);b=a.generateStepsActions(c,b)});return b};b.prototype.pageAspectRatio=function(){return this.flow.pageAspectRatio};return b}(a.Visual);b.Flow=
d;d=function(c){function b(d,a,m){c.call(this,d,a,m);this.simpleFlow=d}__extends(b,c);b.prototype.initializePages=function(c){var b=this.cameraElem.size.getContainedSize(this.simpleFlow.pageAspectRatio),d=new e.Types.Placement(new e.Types.Xyz,new e.Types.Xyz,new e.Types.Scale,1);this.pageElems.forEach(function(a,m){d.position.z=-m;d.opacity=0===m?1:0;var e=d.renderCss(b);e.width=b.width;e.height=b.height;c.set(a.div,e,"initialize")})};b.prototype.generatePageMovement=function(c,b,d){var a=this,m=
this.cameraElem.size.getContainedSize(this.simpleFlow.pageAspectRatio),h=new e.Types.Placement(new e.Types.Xyz,new e.Types.Xyz,new e.Types.Scale,1);this.pageElems.forEach(function(e,g){h.position.z=d-g;h.opacity=g===d?1:0;var f=h.renderCss(m);f.width=m.width;f.height=m.height;a.applyCss(c,e.div,b,1,f,Expo.easeOut)})};b.prototype.applyCss=function(c,b,d,a,m,e){"initialize"===d?c.set(b,m,d):(m.ease=e,c.to(b,a,m,d))};return b}(b.Flow);b.SimpleFlow=d})(a.Flows||(a.Flows={}))})(e.Render||(e.Render={}));
(function(a){(function(a){(function(b){var a=function(b){function d(c,d,a){b.call(this,c,d,a)}__extends(d,b);return d}(e.Render.Flows.SimpleFlow);b.Renderer=a})(a.unknown||(a.unknown={}))})(a.Flows||(a.Flows={}))})(e.Extensions||(e.Extensions={}));(function(a){(function(a){(function(b){var a=e.Util;b.readJson=function(h,d){var c=d.setup||{},m=e.Types.Placement.fromJson(c.placement),v=a.convertToNumber(c.pageAspectRatio,h.frame.aspectRatio);return new b.Extension(h,m,c.defaultPageClass,v)}})(a.unknown||
(a.unknown={}))})(a.Flows||(a.Flows={}))})(e.Extensions||(e.Extensions={}));(function(a){(function(a){(function(b){var a=function(b){function d(c,d){b.call(this,c,d);this.unknownItem=c;this.divs=[];this.div.innerText=c.unknownType+"?";this.div.classList.add("unknown")}__extends(d,b);return d}(e.Render.Items.Item);b.Renderer=a})(a.unknown||(a.unknown={}))})(a.Items||(a.Items={}))})(e.Extensions||(e.Extensions={}));(function(a){(function(b){var a=function(b){function d(c,d){b.call(this,c,d);this.actions=
[]}__extends(d,b);d.prototype.removeAction=function(c){c=this.actions.indexOf(c);this.actions.splice(c,1)};return d}(b.Script);b.ActionsScript=a})(a.Scripts||(a.Scripts={}));(function(b){b=b.ActionType||(b.ActionType={});b[b.SetProperties=0]="SetProperties"})(a.Actions||(a.Actions={}));(function(b){(function(b){b.fromString=function(b){b=(b||"properties").toString().trim();if("properties"===b)return 0;e.Util.logError("ActionType.fromString()","Unknown action type: "+b);return 0};b.toString=function(b){return"properties"}})(b.ActionType||
(b.ActionType={}))})(a.Actions||(a.Actions={}));(function(b){var a=function(){function b(d,c,a){this.script=d;this.actionType=c;this.delay=a;Math.max(0,a)}b.prototype.saveJson=function(){e.Util.logWarning("Action.saveJson()","Abstract method called");return{}};return b}();b.Action=a})(a.Actions||(a.Actions={}));(function(b){var a=function(b){function d(c,d,a){b.call(this,c,0,d);this.properties=a}__extends(d,b);return d}(b.Action);b.SetPropertiesAction=a})(a.Actions||(a.Actions={}));(function(b){var a=
function(b){function d(c,d,a,e,n,p){b.call(this,c,d,a,n,e);this.defaultPageClassIfNotGiven=p}__extends(d,b);d.prototype.getDefaultPageClassName=function(){return this.defaultPageClass||this.defaultPageClassIfNotGiven};d.prototype.getDefaultPageClassValue=function(){return{background:"#FFF",corners:{topLeft:2,bottomRight:2,bottomLeft:2,topRight:2},shadow:[0,0,1.5,"rgba(0,0,0,0.5)",.1]}};return d}(b.Flow);b.PlacementFlow=a})(a.Flows||(a.Flows={}));(function(b){var a=function(a){function d(){var c=[];
c.push(new b.Variables.NumberOffsetVariableType("x",["x"],"xPercent",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,50,!0,"%",!0));c.push(new b.Variables.NumberOffsetVariableType("y",["y"],"yPercent",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,50,!0,"%",!0));a.call(this,"anchor",["anchor"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&b.x.setValue(-50);return b};d.prototype.createPropertyFromNumber=
function(c){var d=new b.Property(this);d.x.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);c=c.split(",");b.x.setValue(this.parseString(c[0]));1<c.length&&b.y.setValue(this.parseString(c[1]));return b};d.prototype.parseString=function(c){c=c.trim().toLowerCase();return"left"===c?-50:"center"===c?0:"right"===c?50:"top"===c?-50:"middle"===c?0:"bottom"===c?50:"l"===c?-50:"c"===c?0:"r"===c?50:"t"===c?-50:"m"===c?0:"b"===
c?50:e.Util.convertToNumber(c,0,!0)};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.x.setValue(e.Util.convertToNumber(c[0],0,!0));1<c.length&&b.y.setValue(e.Util.convertToNumber(c[1],0,!0));return b};d.prototype.renderLabel=function(c){return this.renderVariables(c,!1,!0)};return d}(b.PropertyType);b.AnchorPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(c){c=[];c.push(new b.Variables.NumberVariableType("duration",
["duration","dur"],void 0,0,Number.POSITIVE_INFINITY,0,2," secs",!1));c.push(new b.Variables.EaseVariableType);c.push(new b.Variables.NumberVariableType("repeat",["repeat","rep"],"repeat",0,Number.POSITIVE_INFINITY,0,0," times",!1));c.push(new b.Variables.NumberVariableType("repeat delay",["repeatdelay","delay"],"repeatDelay",0,Number.POSITIVE_INFINITY,0,0," secs",!1));c.push(new b.Variables.BooleanVariableType("yoyo",["yoyo"],"yoyo",!1,!0));c.push(new b.Variables.NumberVariableType("stagger",["stagger",
"stag"],void 0,0,Number.POSITIVE_INFINITY,0,2," secs",!1));a.call(this,"animation",["animation","anim"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var d=new b.Property(this);c&&d.duration.setValue(1);return d};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.duration.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.duration.setValue(1);d.ease.setValue(c);return d};d.prototype.createPropertyFromArray=
function(c){var d=new b.Property(this);0<c.length&&d.duration.setValue(null===c[0]?void 0:c[0]);1<c.length&&d.ease.setValue(null===c[1]?void 0:c[1]);2<c.length&&d.repeat.setValue(null===c[2]?void 0:c[2]);3<c.length&&d.repeatdelay.setValue(null===c[3]?void 0:c[3]);4<c.length&&d.yoyo.setValue(null===c[4]?void 0:c[4]);5<c.length&&d.stagger.setValue(null===c[5]?void 0:c[5]);return d};d.prototype.renderLabel=function(c){var b=1===this.countOfValues(c);return this.renderVariables(c,!0,b)};return d}(b.PropertyType);
b.AnimationPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(c){void 0===c&&(c="transparent");var d=[];d.push(new b.Variables.ColorVariableType("color",["color"],"backgroundColor",c,"transparent"!==c));d.push(new b.Variables.BackgroundImageVariableType("image",["image"],"backgroundImage","none",!1));d.push(new b.Variables.StringVariableType("repeat",["repeat","rep"],"backgroundRepeat","repeat",!1));d.push(new b.Variables.StringVariableType("position",["position",
"pos"],"backgroundPosition","0% 0%",!1));d.push(new b.Variables.StringVariableType("size",["size"],"backgroundSize","auto",!1));a.call(this,"background",["background","back","bg"],d)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&b.color.setValue("#F7F7F7");return b};d.prototype.createPropertyFromNumber=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(c);return b};d.prototype.createPropertyFromString=
function(c){c=c.trim();if(0===c.length||"none"===c)return a.prototype.createPropertyFromBoolean.call(this,!1);var d;0===c.toLowerCase().indexOf("url(")?(d=new b.Property(this),d.image.setValue(c)):(d=a.prototype.createPropertyFromBoolean.call(this,!1),d.color.setValue(c));return d};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.color.setValue(null===c[0]?void 0:c[0]);1<c.length&&b.image.setValue(null===c[1]?void 0:c[1]);2<c.length&&
b.repeat.setValue(null===c[2]?void 0:c[2]);3<c.length&&b.position.setValue(null===c[3]?void 0:c[3]);4<c.length&&b.size.setValue(null===c[4]?void 0:c[4]);return b};d.prototype.renderLabel=function(c){var b=[];void 0!==c.color.getValue()&&b.push("color");return 0===b.length?this.label:this.label+": "+b.join(", ")};return d}(b.PropertyType);b.BackgroundPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.StringVariableType("style",
["style"],"borderStyle","none",!1));c.push(new b.Variables.ContainerHeightPctVariableType("size",["size"],"borderWidth",0,100,0,2,"%",!1));c.push(new b.Variables.ColorVariableType("color",["color"],"borderColor","transparent",!1));a.call(this,"border",["border"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&(b.style.setValue("solid"),b.size.setValue(.5),b.color.setValue("black"));return b};d.prototype.createPropertyFromNumber=
function(c){var b=this.createPropertyFromBoolean(!0);b.size.setValue(c);return b};d.prototype.createPropertyFromString=function(c){var b=this.createPropertyFromBoolean(!0);b.color.setValue(c);return b};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&(b.size.setValue(null===c[0]?void 0:c[0]),b.color.setValue("black"),b.style.setValue("solid"));1<c.length&&b.color.setValue(null===c[1]?void 0:c[1]);2<c.length&&b.style.setValue(null===
c[2]?void 0:c[2]);return b};d.prototype.renderLabel=function(c){var b=[],d=c.style.getValue(),a=c.size.getValue();c=c.color.getValue();void 0!==d&&b.push(d);void 0!==a&&b.push(a.toString()+"px");void 0!==c&&b.push("color");return 0===b.length?this.label:this.label+": "+b.join(" ")};return d}(b.PropertyType);b.BorderPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.BulletsVariableType);a.call(this,"bullets",["bullets"],c)}
__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,c);c&&b.style.setValue("disc");return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this),a=d.style;c=a.type.getValueByIndex(c-1);a.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.style.setValue(c);return d};d.prototype.createPropertyFromArray=function(c){var d=new b.Property(this),a=this.variableTypes[0].defaultValue;
0<c.length&&(a=c[0]);d.style.setValue(a);return d};d.prototype.renderLabel=function(c){return this.renderVariables(c,!0,!0)};return d}(b.PropertyType);b.BulletsPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.StringVariableType("name",["name"],void 0,"",!1));a.call(this,"class",["class"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return a.prototype.createPropertyFromBoolean.call(this,!1)};d.prototype.createPropertyFromNumber=
function(c){var d=new b.Property(this);d.name.setValue(c.toString());return d};d.prototype.createPropertyFromString=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);b.name.setValue(c.trim());return b};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.name.setValue(c[0].toString());return b};return d}(b.PropertyType);b.ClassPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=
[];c.push(new b.Variables.ColorVariableType("color",["color"],"color","black",!1));a.call(this,"color",["textcolor","color"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&b.color.setValue("white");return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.color.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.color.setValue(c);return d};
d.prototype.createPropertyFromArray=function(c){var d=new b.Property(this);0<c.length&&d.color.setValue(null===c[0]?void 0:c[0]);return d};d.prototype.renderLabel=function(c){return this.renderVariables(c,!0,!0)};return d}(b.PropertyType);b.ColorPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.ContainerHeightPctVariableType("tl",["topleft","tl"],"borderTopLeftRadius",0,100,0,2,"",!1));c.push(new b.Variables.ContainerHeightPctVariableType("tr",
["topright","tr"],"borderTopRightRadius",0,100,0,2,"",!1));c.push(new b.Variables.ContainerHeightPctVariableType("bl",["bottomleft","bl"],"borderBottomLeftRadius",0,100,0,2,"",!1));c.push(new b.Variables.ContainerHeightPctVariableType("br",["bottomright","br"],"borderBottomRightRadius",0,100,0,2,"",!1));a.call(this,"corners",["corners"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return!1===c?a.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(3)};
d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.topleft.setValue(c);d.topright.setValue(c);d.bottomleft.setValue(c);d.bottomright.setValue(c);return d};d.prototype.createPropertyFromString=function(c){c=c.split(",");for(var b=0;b<c.length;b++)c[b]=c[b].trim();return this.createPropertyFromArray(c)};d.prototype.createPropertyFromArray=function(c){var d=0<c.length&&void 0!==c[0]?e.Util.convertToNumber(c[0]):void 0,a=1<c.length&&void 0!==c[1]?e.Util.convertToNumber(c[1]):
d,h=2<c.length&&void 0!==c[2]?e.Util.convertToNumber(c[2]):d;c=3<c.length&&void 0!==c[3]?e.Util.convertToNumber(c[3]):a;var n=new b.Property(this);n.topleft.setValue(d);n.topright.setValue(a);n.bottomright.setValue(h);n.bottomleft.setValue(c);return n};d.prototype.renderLabel=function(c){return this.renderVariables(c,!1,!0)};return d}(b.PropertyType);b.CornersPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(c){void 0===c&&(c=!1);var d=[];d.push(new b.Variables.BooleanVariableType("crop",
["crop"],"overflow","visible","hidden",c));a.call(this,"crop",["crop"],d)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var d=new b.Property(this);d.crop.setValue(c);return d};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.crop.setValue(!!c);return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);c=c.trim().toLocaleLowerCase();d.crop.setValue(0<c.length&&"false"!==c&&"0"!==c);return d};d.prototype.createPropertyFromArray=
function(c){var d=new b.Property(this),a=!1;0<c.length&&(c=c[0],a=""!==c&&"false"!==c&&"0"!==c&&!!c);d.crop.setValue(a);return d};d.prototype.renderLabel=function(c){var b=1===this.countOfValues(c);return this.renderVariables(c,!0,b)};return d}(b.PropertyType);b.CropPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(c){void 0===c&&(c=!1);var d=[];d.push(new b.Variables.StringVariableType("name",["family","face"],"font-family","Arial, Helvetica, sans-serif",
!1));d.push(new b.Variables.ContainerHeightPctVariableType("size",["size"],"fontSize",0,Number.MAX_VALUE,12,1," pixels",c));d.push(new b.Variables.PercentVariableType("line height",["lineheight","lh"],"lineHeight",0,Number.MAX_VALUE,120,!0));a.call(this,"font",["font"],d)}__extends(d,a);d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.size.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.family.setValue(c);return d};d.prototype.createPropertyFromArray=
function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.family.setValue(null===c[0]?void 0:c[0]);1<c.length&&b.size.setValue(null===c[1]?void 0:c[1]);2<c.length&&b.lineheight.setValue(null===c[2]?void 0:c[2]);return b};d.prototype.renderLabel=function(c){var b=1===this.countOfValues(c);return this.renderVariables(c,!0,b)};return d}(b.PropertyType);b.FontPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.NumberVariableType("item",
["item"],void 0,0,Number.POSITIVE_INFINITY,0,0,"",!1));a.call(this,"move to",["moveto","move"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var d=new b.Property(this);d.item.setValue(c?1:0);return d};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.item.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.item.setValue(e.Util.convertToNumber(c));return d};d.prototype.createPropertyFromArray=function(c){var d=
new b.Property(this);0<c.length&&d.item.setValue(null===c[0]?void 0:e.Util.convertToNumber(c[0]));return d};return d}(b.PropertyType);b.MoveToPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.PercentVariableType("percent",["percent","pct"],"autoAlpha",0,100,100,!1));a.call(this,"opacity",["opacity","opac"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,
!1);!0===c&&b.percent.setValue(100);return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.percent.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);b.percent.setValue(e.Util.convertToNumber(c,100));return b};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.percent.setValue(e.Util.convertToNumber(c[0],100));return b};
d.prototype.renderLabel=function(c){return this.renderVariables(c,!1,!0)};return d}(b.PropertyType);b.OpacityPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.ContainerWidthPctVariableType("left",["left","l"],"paddingLeft",0,50,0,2,"%",!1));c.push(new b.Variables.ContainerHeightPctVariableType("top",["top","t"],"paddingTop",0,50,0,2,"%",!1));c.push(new b.Variables.ContainerWidthPctVariableType("right",["right","r"],"paddingRight",
0,50,0,2,"%",!1));c.push(new b.Variables.ContainerHeightPctVariableType("bottom",["bottom","b"],"paddingBottom",0,50,0,2,"%",!1));a.call(this,"padding",["padding","pad"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return!1===c?a.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(2)};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.left.setValue(c);d.top.setValue(c);d.right.setValue(c);d.bottom.setValue(c);return d};
d.prototype.createPropertyFromString=function(c){c=c.split(",");for(var b=0;b<c.length;b++)c[b]=c[b].trim();return this.createPropertyFromArray(c)};d.prototype.createPropertyFromArray=function(c){var d=0<c.length&&void 0!==c[0]?e.Util.convertToNumber(c[0]):void 0,a=1<c.length&&void 0!==c[1]?e.Util.convertToNumber(c[1]):d,h=2<c.length&&void 0!==c[2]?e.Util.convertToNumber(c[2]):d;c=3<c.length&&void 0!==c[3]?e.Util.convertToNumber(c[3]):a;var n=new b.Property(this);n.left.setValue(c);n.top.setValue(d);
n.right.setValue(a);n.bottom.setValue(h);return n};d.prototype.renderLabel=function(c){var b=c.all.getValue(),d=c.left.getValue()||b,a=c.top.getValue()||b,e=c.right.getValue()||b;c=c.bottom.getValue()||b;return void 0===d&&void 0===a&&void 0===e&&void 0===c?this.label:d===a&&a===e&&e===c&&c===d?this.label+": "+d.toString()+"%":void 0===d||void 0===a||void 0===e||void 0===c?this.label+": "+(void 0===d?"":"left "+d.toString()+"% ")+(void 0===a?"":"top "+a.toString()+"% ")+(void 0===e?"":"right "+e.toString()+
"% ")+(void 0===c?"":"bottom "+c.toString()+"% "):this.label+": "+d.toString()+"% "+a.toString()+"% "+e.toString()+"% "+c.toString()+"%"};return d}(b.PropertyType);b.PaddingPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,e=[];e.push(new b.Variables.ContainerWidthPctVariableType("X",["x"],"x",c,d,0,2," pixels",!0));e.push(new b.Variables.ContainerHeightPctVariableType("Y",["y"],"y",c,d,0,2," pixels",
!0));e.push(new b.Variables.ContainerDepthPctVariableType("Z",["z"],"z",c,d,0,2," pixels",!0));a.call(this,"position",["position","pos"],e)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return a.prototype.createPropertyFromBoolean.call(this,!1)};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.x.setValue(c);return d};d.prototype.createPropertyFromString=function(c){c=c.split(",");for(var b=0;b<c.length;b++)c[b]=c[b].trim();return this.createPropertyFromArray(c)};
d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.x.setValue(e.Util.convertToNumber(c[0]));1<c.length&&b.y.setValue(e.Util.convertToNumber(c[1]));2<c.length&&b.z.setValue(e.Util.convertToNumber(c[2]));return b};d.prototype.renderLabel=function(c){var b=this.countOfValues(c),d=1===b,a=1===b;2===b&&void 0!==c.z.getValue()&&(d=!0);return this.renderVariables(c,d,a)};return d}(b.PropertyType);b.PositionPropertyType=a})(a.Properties||
(a.Properties={}));(function(b){var a=function(a){function d(){var c=[],d=String.fromCharCode(176);c.push(new b.Variables.NumberVariableType("X",["x"],"rotationX",-36E3,36E3,0,2,d,!1));c.push(new b.Variables.NumberVariableType("Y",["y"],"rotationY",-36E3,36E3,0,2,d,!1));c.push(new b.Variables.NumberVariableType("Z",["z"],"rotationZ",-36E3,36E3,0,2,d,!0));a.call(this,"rotation",["rotation","rotate","rot"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,
!1);!0===c&&b.z.setValue(360);return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.z.setValue(c);return d};d.prototype.createPropertyFromString=function(c){c=c.split(",");for(var b=0;b<c.length;b++)c[b]=c[b].trim();return this.createPropertyFromArray(c)};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.x.setValue(e.Util.convertToNumber(c[0]));1<c.length&&b.y.setValue(e.Util.convertToNumber(c[1]));
2<c.length&&b.z.setValue(e.Util.convertToNumber(c[2]));return b};d.prototype.renderLabel=function(c){var b=this.countOfValues(c),d=3>b;1===b&&void 0!==c.z.getValue()&&(d=!1);return this.renderVariables(c,d,!0)};return d}(b.PropertyType);b.RotationPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.PercentVariableType("X",["x"],"scaleX",0,1E3,100,!1));c.push(new b.Variables.PercentVariableType("Y",["y"],"scaleY",0,1E3,100,!1));
a.call(this,"scale",["scale"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return!1===c?a.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(200)};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.x.setValue(c);d.y.setValue(c);return d};d.prototype.createPropertyFromString=function(c){c=c.split(",");for(var b=0;b<c.length;b++)c[b]=c[b].trim();return this.createPropertyFromArray(c)};d.prototype.createPropertyFromArray=
function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.x.setValue(e.Util.convertToNumber(c[0]));1<c.length&&b.y.setValue(e.Util.convertToNumber(c[1]));return b};d.prototype.renderLabel=function(c){var b=this.countOfValues(c),d=1===b;if(1<b){var b=c.x.getValue(),a=c.y.getValue();if(b===a)return this.label+": "+b.toString()+"%"}return this.renderVariables(c,d,!0)};return d}(b.PropertyType);b.ScalePropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=
[];c.push(new b.Variables.ContainerWidthPctVariableType("Width",["width","w"],"width",0,Number.POSITIVE_INFINITY,0,2,"",!1));c.push(new b.Variables.ContainerHeightPctVariableType("Height",["height","h"],"height",0,Number.POSITIVE_INFINITY,0,2,"",!1));a.call(this,"size",["size"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return!1===c?a.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(100)};d.prototype.createPropertyFromNumber=function(c){var d=
new b.Property(this);d.width.setValue(c);d.height.setValue(c);return d};d.prototype.createPropertyFromString=function(c){c=c.split(",");for(var b=0;b<c.length;b++)c[b]=c[b].trim();return this.createPropertyFromArray(c)};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.width.setValue(e.Util.convertToNumber(c[0]));1<c.length&&b.height.setValue(e.Util.convertToNumber(c[1]));return b};d.prototype.renderLabel=function(c){return this.renderVariables(c,
!1,!0)};return d}(b.PropertyType);b.SizePropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[],d=String.fromCharCode(176);c.push(new b.Variables.NumberVariableType("X",["degrees","deg"],"skewX",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,d,!1));a.call(this,"skew",["skew"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){return!1===c?a.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(-30)};d.prototype.createPropertyFromNumber=
function(c){var d=new b.Property(this);d.degrees.setValue(c);return d};d.prototype.createPropertyFromString=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);b.degrees.setValue(e.Util.convertToNumber(c));return b};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.degrees.setValue(null===c[0]?void 0:e.Util.convertToNumber(c[0]));return b};d.prototype.renderLabel=function(c){this.countOfValues(c);return this.renderVariables(c,
!0,!0)};return d}(b.PropertyType);b.SkewPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(c,d,e){void 0===c&&(c="shadow");void 0===d&&(d=["shadow","shadows"]);void 0===e&&(e="boxShadow");var t=[];t.push(new b.Variables.ShadowVariableType(e,"boxShadow"===e));a.call(this,c,d,t)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&b[this.variableTypes[0].jsonNames[0]].setValue([.5,
.5,2]);return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d[this.variableTypes[0].jsonNames[0]].setValue([c,c,2]);return d};d.prototype.parseString=function(c){var b=[],d=[],a=0;c.split(",").forEach(function(c){0<a?b[b.length-1]+=","+c:b.push(c);-1<c.indexOf("(")&&a++;-1<c.indexOf(")")&&a--});b.forEach(function(c,b){c=c.trim().toLowerCase();3===b?d.push(isNaN(c)?c:Number(c)):5===b?d.push("1"===c||"true"===c):d.push(e.Util.convertToNumber(c))});return d};d.prototype.createPropertyFromString=
function(c){var d=new b.Property(this);d[this.variableTypes[0].jsonNames[0]].setValue(this.parseString(c));return d};d.prototype.createPropertyFromArray=function(c){var d=this,a=new b.Property(this);if(0===c.length)return a;if(c[0]instanceof Array||"number"===typeof c[0])a[this.variableTypes[0].jsonNames[0]].setValue(c);else{var e=[];c.forEach(function(b){"string"===typeof b?e.push(d.parseString(b)):"object"===typeof c[0]&&e.push(d.parseObject(b))});a[this.variableTypes[0].jsonNames[0]].setValue(e)}return a};
d.prototype.parseObject=function(c){return[c.x,c.y,c.blur,c.color,c.spread,c.inset]};d.prototype.createPropertyFromObject=function(c){var d=new b.Property(this);if(void 0===c)return d;d[this.variableTypes[0].jsonNames[0]].setValue(this.parseObject(c));return d};d.prototype.renderLabel=function(c){return this.label};return d}(b.PropertyType);b.ShadowPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(c){void 0===c&&(c="transparent");var d=[];d.push(new b.Variables.ColorVariableType("color",
["color"],"fill",c,"transparent"!==c));a.call(this,"fill",["fill"],d)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&b.color.setValue("#F7F7F7");return b};d.prototype.createPropertyFromNumber=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(c);return b};d.prototype.createPropertyFromString=function(c){c=c.trim();if(0===c.length||"none"===c)return a.prototype.createPropertyFromBoolean.call(this,
!1);var b;b=a.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(c);return b};d.prototype.createPropertyFromArray=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);0<c.length&&b.color.setValue(null===c[0]?void 0:c[0]);return b};return d}(b.PropertyType);b.SvgFillPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.TextAlignVariableType);a.call(this,"textAlign",["textalign","align"],c)}__extends(d,
a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,c);c&&b.align.setValue("justify");return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);0===c&&d.align.setValue("inherit");1===c&&d.align.setValue("left");2===c&&d.align.setValue("center");3===c&&d.align.setValue("right");4===c&&d.align.setValue("justify");return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.align.setValue(c);
return d};d.prototype.createPropertyFromArray=function(c){var d=new b.Property(this),a=this.variableTypes[0].defaultValue;0<c.length&&(a=c[0]);d.align.setValue(a);return d};d.prototype.renderLabel=function(c){return this.renderVariables(c,!0,!0)};return d}(b.PropertyType);b.TextAlignPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(b){function d(){b.call(this,"text shadow",["textshadow","textshadows"],"textShadow")}__extends(d,b);return d}(b.ShadowPropertyType);b.TextShadowPropertyType=
a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.BooleanVariableType("bold",["bold"],"font-weight","normal","bold"));c.push(new b.Variables.BooleanVariableType("italic",["italic"],"font-style","normal","italic"));c.push(new b.Variables.StringVariableType("line",["line","lines"],"text-decoration","none",!1));c.push(new b.Variables.BooleanVariableType("smallCaps",["smallcaps","caps"],"font-variant","normal","small-caps"));a.call(this,"style",
["textstyle","textstyles","styles","style"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1);!0===c&&(b.bold.setValue(!0),b.italic.setValue(!0));return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.bold.setValue(0<(c&1));d.italic.setValue(0<(c&2));d.smallcaps.setValue(0<(c&4));var a=[];0<(c&8)&&a.push("underline");0<(c&16)&&a.push("line-through");0<(c&32)&&a.push("overline");0===a.length&&
a.push("none");d.line.setValue(a.join(" "));return d};d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);c=c.toLocaleLowerCase();d.bold.setValue(-1<c.indexOf("bold"));d.italic.setValue(-1<c.indexOf("italic"));d.smallcaps.setValue(-1<c.indexOf("caps"));var a=[];-1<c.indexOf("under")&&a.push("underline");-1<c.indexOf("through")&&a.push("line-through");-1<c.indexOf("over")&&a.push("overline");0===a.length&&a.push("none");d.line.setValue(a.join(" "));return d};d.prototype.createPropertyFromArray=
function(c){var b=a.prototype.createPropertyFromBoolean.call(this,!1),d=[];c.forEach(function(c){c=(c||"").toString().trim().toLocaleLowerCase();0===c.indexOf("b")&&b.bold.setValue(!0);0===c.indexOf("i")&&b.italic.setValue(!0);0===c.indexOf("c")&&b.smallCaps.setValue(!0);0===c.indexOf("u")&&d.push("underline");0===c.indexOf("t")&&d.push("line-through");0===c.indexOf("o")&&d.push("overline")});0===d.length&&d.push("none");b.line.setValue(d.join(" "));return b};d.prototype.renderLabel=function(c){return this.renderVariables(c,
!0,!0)};return d}(b.PropertyType);b.TextStylePropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(a){function d(){var c=[];c.push(new b.Variables.TextWidthVariableType);a.call(this,"width",["textwidth","width"],c)}__extends(d,a);d.prototype.createPropertyFromBoolean=function(c){var b=a.prototype.createPropertyFromBoolean.call(this,c);c&&b.width.setValue(100);return b};d.prototype.createPropertyFromNumber=function(c){var d=new b.Property(this);d.width.setValue(c);return d};
d.prototype.createPropertyFromString=function(c){var d=new b.Property(this);d.width.setValue(e.Util.convertToNumber(c,this.variableTypes[0].defaultValue));return d};d.prototype.createPropertyFromArray=function(c){var d=new b.Property(this),a=this.variableTypes[0].defaultValue;0<c.length&&(a=e.Util.convertToNumber(c[0],a));d.width.setValue(a);return d};d.prototype.renderLabel=function(c){return this.renderVariables(c,!0,!0)};return d}(b.PropertyType);b.TextWidthPropertyType=a})(a.Properties||(a.Properties=
{}));(function(b){var a=function(a){function d(c){var d=[];d.push(new b.Variables.OriginVariableType(!0,c));a.call(this,"transformOrigin",["transformorigin","origin"],d)}__extends(d,a);d.prototype.createProperty=function(c){var d=new b.Property(this);d.transformOrigin.setValue(c);return d};d.prototype.createPropertyFromBoolean=function(c){return this.createProperty(c)};d.prototype.createPropertyFromNumber=function(c){return this.createProperty(c)};d.prototype.createPropertyFromString=function(c){return this.createProperty(c)};
d.prototype.createPropertyFromArray=function(c){return this.createProperty(c)};d.prototype.renderLabel=function(c){return this.renderVariables(c,!1,!0)};return d}(b.PropertyType);b.TransformOriginPropertyType=a})(a.Properties||(a.Properties={}));(function(b){var a=function(){function a(){}a.ANCHOR=new b.AnchorPropertyType;a.ANIMATION=new b.AnimationPropertyType;a.BACKGROUND=new b.BackgroundPropertyType;a.BORDER=new b.BorderPropertyType;a.BULLET=new b.BulletsPropertyType;a.CLASS=new b.ClassPropertyType;
a.CORNERS=new b.CornersPropertyType;a.CROP=new b.CropPropertyType;a.CROP_SVG=new b.CropPropertyType(!0);a.FILL_SVG=new b.SvgFillPropertyType;a.FONT=new b.FontPropertyType;a.MOVE_TO=new b.MoveToPropertyType;a.OPACITY=new b.OpacityPropertyType;a.PADDING=new b.PaddingPropertyType;a.POSITION=new b.PositionPropertyType;a.ROTATION=new b.RotationPropertyType;a.SCALE=new b.ScalePropertyType;a.SIZE=new b.SizePropertyType;a.SKEW=new b.SkewPropertyType;a.SHADOW=new b.ShadowPropertyType;a.TEXT_ALIGN=new b.TextAlignPropertyType;
a.TEXT_COLOR=new b.ColorPropertyType;a.TEXT_SHADOW=new b.TextShadowPropertyType;a.TEXT_STYLE=new b.TextStylePropertyType;a.TEXT_WIDTH=new b.TextWidthPropertyType;a.TRANSFORM_ORIGIN=new b.TransformOriginPropertyType(!1);a.TRANSFORM_ORIGIN_CONTAINER=new b.TransformOriginPropertyType(!0);return a}();b.Cache=a})(a.Properties||(a.Properties={}));(function(b){var a=function(b){function d(c,d,a,e,n,p){b.call(this,c,"image","Image",[n],[p]);this.src=d;this.width=a;this.height=e}__extends(d,b);return d}(b.Item);
b.ImageItem=a})(a.Items||(a.Items={}));(function(b){var a=function(b){function d(c,d,a){b.call(this,c,"layer","Layer",[d],[a]);this.items=[];this.flow=c.flow;this.story=c.flow.story}__extends(d,b);d.prototype.getCountOfStepsUsed=function(){var c=1;this.scriptSets.forEach(function(b){c=Math.max(c,b.getCountOfStepsUsed())});this.items.forEach(function(b){c=Math.max(c,b.getCountOfStepsUsed())});return c};return d}(b.Item);b.LayerItem=a})(a.Items||(a.Items={}));(function(b){var a=function(b){function d(c,
d,a,e,n,p){b.call(this,c,d,a,[n],[p]);this.sequenceOnStepIndex=e}__extends(d,b);return d}(b.Item);b.SequencedItem=a})(a.Items||(a.Items={}));(function(b){var a=function(b){function d(c,d,a,e,n,p,g,f,k,l,q,r,x){b.call(this,c,"text","Text",[p,f,l,r],[g,k,q,x]);this.text=d;this.stackedLines=a;this.stackedWords=e;this.stackedChars=n;this.linesInit=f;this.linesScriptSet=k;this.wordsInit=l;this.wordsScriptSet=q;this.charsInit=r;this.charsScriptSet=x}__extends(d,b);return d}(b.Item);b.TextItem=a})(a.Items||
(a.Items={}));(function(b){(function(a){var e=function(){function d(){}d.getPropertyTypes=function(){if(void 0===d._propertyTypes){var c=[];c.push(b.Cache.ANIMATION);c.push(b.Cache.BACKGROUND);c.push(b.Cache.BORDER);c.push(b.Cache.CORNERS);c.push(b.Cache.CROP);c.push(b.Cache.FONT);c.push(b.Cache.OPACITY);c.push(b.Cache.SHADOW);c.push(b.Cache.TEXT_COLOR);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();a.Canvas=e})(b.PerElement||(b.PerElement={}))})(a.Properties||(a.Properties=
{}));(function(b){(function(a){var e=function(){function d(){}d.getPropertyTypes=function(){if(void 0===d._propertyTypes){var c=[];c.push(b.Cache.ANIMATION);c.push(b.Cache.BACKGROUND);c.push(b.Cache.BORDER);c.push(b.Cache.CORNERS);c.push(b.Cache.CROP);c.push(b.Cache.OPACITY);c.push(b.Cache.SCALE);c.push(b.Cache.SHADOW);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();a.Frame=e})(b.PerElement||(b.PerElement={}))})(a.Properties||(a.Properties={}));(function(b){(function(a){var e=
function(){function d(){}d.getPropertyTypes=function(){if(void 0===d._propertyTypes){var c=[];c.push(b.Cache.ANCHOR);c.push(b.Cache.ANIMATION);c.push(b.Cache.CLASS);c.push(b.Cache.CORNERS);c.push(b.Cache.OPACITY);c.push(b.Cache.POSITION);c.push(b.Cache.ROTATION);c.push(b.Cache.SCALE);c.push(b.Cache.SHADOW);c.push(b.Cache.SKEW);c.push(b.Cache.TRANSFORM_ORIGIN);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();a.ImageItem=e})(b.PerElement||(b.PerElement={}))})(a.Properties||
(a.Properties={}));(function(b){(function(a){var e=function(){function a(){}a.getPropertyTypes=function(){if(void 0===a._propertyTypes){var c=[];c.push(b.Cache.ANCHOR);c.push(b.Cache.ANIMATION);c.push(b.Cache.BACKGROUND);c.push(b.Cache.BORDER);c.push(b.Cache.CLASS);c.push(b.Cache.CORNERS);c.push(b.Cache.CROP);c.push(b.Cache.MOVE_TO);c.push(b.Cache.OPACITY);c.push(b.Cache.POSITION);c.push(b.Cache.ROTATION);c.push(b.Cache.SCALE);c.push(b.Cache.SHADOW);c.push(b.Cache.SIZE);c.push(b.Cache.SKEW);c.push(b.Cache.TRANSFORM_ORIGIN);
a._propertyTypes=c}return a._propertyTypes};a._propertyTypes=void 0;return a}();a.LayerItem=e})(b.PerElement||(b.PerElement={}))})(a.Properties||(a.Properties={}));(function(b){(function(a){var e=function(){function a(){}a.getPropertyTypes=function(){if(void 0===a._propertyTypes){var c=[];c.push(b.Cache.ANIMATION);c.push(b.Cache.BACKGROUND);c.push(b.Cache.BORDER);c.push(b.Cache.CORNERS);c.push(b.Cache.CROP);c.push(b.Cache.FONT);c.push(b.Cache.OPACITY);c.push(new b.FontPropertyType(!0));c.push(b.Cache.SHADOW);
c.push(b.Cache.TEXT_COLOR);c.push(b.Cache.TEXT_SHADOW);a._propertyTypes=c}return a._propertyTypes};a._propertyTypes=void 0;return a}();a.Page=e})(b.PerElement||(b.PerElement={}))})(a.Properties||(a.Properties={}));(function(b){(function(a){var e=function(){function a(){}a.cacheProperties=function(){a._propertyTypes=[];a._linePropertyTypes=[];a._wordPropertyTypes=[];a._charPropertyTypes=[];var c=[a._propertyTypes],e=[a._linePropertyTypes],h=[a._propertyTypes,a._linePropertyTypes,a._wordPropertyTypes,
a._charPropertyTypes],t=[a._linePropertyTypes,a._wordPropertyTypes,a._charPropertyTypes];a.addPropertyType(c,b.Cache.ANCHOR);a.addPropertyType(h,b.Cache.ANIMATION);a.addPropertyType(h,b.Cache.BACKGROUND);a.addPropertyType(h,b.Cache.BORDER);a.addPropertyType(e,b.Cache.BULLET);a.addPropertyType(h,b.Cache.CLASS);a.addPropertyType(h,b.Cache.CORNERS);a.addPropertyType(c,b.Cache.CROP);a.addPropertyType(c,b.Cache.FONT);a.addPropertyType(h,b.Cache.OPACITY);a.addPropertyType(h,b.Cache.PADDING);a.addPropertyType(h,
b.Cache.POSITION);a.addPropertyType(h,b.Cache.ROTATION);a.addPropertyType(h,b.Cache.SCALE);a.addPropertyType(h,b.Cache.SHADOW);a.addPropertyType(h,b.Cache.SKEW);a.addPropertyType(c,b.Cache.TEXT_ALIGN);a.addPropertyType(h,b.Cache.TEXT_COLOR);a.addPropertyType(h,b.Cache.TEXT_SHADOW);a.addPropertyType(h,b.Cache.TEXT_STYLE);a.addPropertyType(c,b.Cache.TEXT_WIDTH);a.addPropertyType(c,b.Cache.TRANSFORM_ORIGIN);a.addPropertyType(t,b.Cache.TRANSFORM_ORIGIN_CONTAINER)};a.addPropertyType=function(c,a){c.forEach(function(c){c.push(a)})};
a.getPropertyTypes=function(){void 0===a._propertyTypes&&a.cacheProperties();return a._propertyTypes};a.getLinePropertyTypes=function(){void 0===a._linePropertyTypes&&a.cacheProperties();return a._linePropertyTypes};a.getWordPropertyTypes=function(){void 0===a._wordPropertyTypes&&a.cacheProperties();return a._wordPropertyTypes};a.getCharPropertyTypes=function(){void 0===a._charPropertyTypes&&a.cacheProperties();return a._charPropertyTypes};a._propertyTypes=void 0;a._linePropertyTypes=void 0;a._wordPropertyTypes=
void 0;a._charPropertyTypes=void 0;return a}();a.TextItem=e})(b.PerElement||(b.PerElement={}))})(a.Properties||(a.Properties={}));(function(a){a=a.StaggerTargets||(a.StaggerTargets={});a[a.All=0]="All";a[a.Odd=1]="Odd";a[a.Even=2]="Even";a[a.Thirds1=3]="Thirds1";a[a.Thirds2=4]="Thirds2";a[a.Thirds3=5]="Thirds3"})(a.Properties||(a.Properties={}));(function(a){a=a.StaggerOrder||(a.StaggerOrder={});a[a.Forward=0]="Forward";a[a.Reverse=1]="Reverse";a[a.Random=2]="Random"})(a.Properties||(a.Properties=
{}));(function(a){var e=function(){function a(b,c,e){void 0===b&&(b=a.defaultDelay);void 0===c&&(c=a.defaultTargets);void 0===e&&(e=a.defaultOrder);this.delay=b;this.targets=c;this.order=e;this.delay=Math.round(10*b)/10}a.prototype.isDefault=function(){return this.delay!==a.defaultDelay||this.targets!==a.defaultTargets||this.order!==a.defaultOrder?!1:!0};a.defaultDelay=0;a.defaultTargets=0;a.defaultOrder=0;return a}();a.Stagger=e})(a.Properties||(a.Properties={}));(function(a){(function(a){var b=
function(){function a(c){this.type=c}a.prototype.getValue=function(a){void 0===a&&(a=!1);return a?void 0!==this._value?this._value:void 0!==this.defaultValueOverride?this.defaultValueOverride:this.type.defaultValue:this._value};a.prototype.setValue=function(a){this._value=void 0===a?void 0:this.type.scrubValue(a)};a.prototype.render=function(a,b){var d=this.getValue();if(void 0!==d){var e=[];a&&(e.push(this.type.label),e.push(": "));e.push(d.toString());b&&e.push(this.type.text);return e.join("")}};
return a}();a.Variable=b})(a.Variables||(a.Variables={}))})(a.Properties||(a.Properties={}));(function(a){a=a.ScriptType||(a.ScriptType={});a[a.InitEvent=0]="InitEvent";a[a.StepEvent=1]="StepEvent";a[a.SwitchEvent=2]="SwitchEvent";a[a.ActionsOrphan=3]="ActionsOrphan";a[a.PropertyOrphan=4]="PropertyOrphan"})(a.Scripts||(a.Scripts={}));(function(a){(function(a){a.fromString=function(a){a=(a||"step").toString().toLowerCase().trim();if("init"===a)return 0;if(0===a.indexOf("step"))return 1;if("switch"===
a)return 2;if("actionsorphan"===a)return 3;if("propertyorphan"===a)return 4;e.Util.logError("ScriptType.fromString()","Unknown script type: "+a);return 1};a.toString=function(a){return 0===a?"init":1===a?"step":2===a?"switch":3===a?"actionsorphan":4===a?"propertyorphan":"init"}})(a.ScriptType||(a.ScriptType={}))})(a.Scripts||(a.Scripts={}));(function(a){var e=function(a){function b(c){a.call(this,c,3);this.scriptSet=c;this.actions=[]}__extends(b,a);return b}(a.ActionsScript);a.ActionsOrphan=e})(a.Scripts||
(a.Scripts={}));(function(a){var e=function(a){function b(c,d){a.call(this,c,d);this.properties=[]}__extends(b,a);return b}(a.Script);a.PropertiesScript=e})(a.Scripts||(a.Scripts={}));(function(a){var e=function(a){function b(c){a.call(this,c,0);this.scriptSet=c}__extends(b,a);return b}(a.PropertiesScript);a.InitEvent=e})(a.Scripts||(a.Scripts={}));(function(a){var e=function(a){function b(c){a.call(this,c,4);this.scriptSet=c}__extends(b,a);return b}(a.PropertiesScript);a.PropertyOrphan=e})(a.Scripts||
(a.Scripts={}));(function(a){var e=function(a){function b(c,d){a.call(this,c,1);this.stepIndex=d}__extends(b,a);return b}(a.ActionsScript);a.StepEvent=e})(a.Scripts||(a.Scripts={}));(function(a){var e=function(a){function b(c,d){a.call(this,c,2);this.switchName=d}__extends(b,a);return b}(a.ActionsScript);a.SwitchEvent=e})(a.Scripts||(a.Scripts={}));var f=function(){return function(a){void 0===a&&(a=void 0);this.autoAdvanceDelay=a;this.stopLabel=this.startLabel="";this.time=0}}();a.Step=f})(e.Models||
(e.Models={}));(function(a){var f=function(){function b(){}b.read=function(f,h){h.setup=h.setup||{};var d=(h.flowType||"simple").trim().toLowerCase(),c,m=a.Flows["read_"+d];void 0===m?(m=b.lookupExtension(d))&&m.readJson?c=m.readJson(f,h):(e.Util.logError("FlowReader.read()","Unknown Flow Type ("+d+")"),c=e.Extensions.Flows.unknown.readJson(f,h)):c=m(f,h);h.pages instanceof Array&&h.pages.forEach(function(b){c.pages.push(a.PageReader.read(c,b))});return c};b.lookupExtension=function(a){for(var b in e.Extensions.Flows){var d=
b.toLowerCase();if(a===d)return e.Extensions.Flows[b]}};return b}();a.FlowReader=f})(e.Serialization||(e.Serialization={}));(function(a){var f=e.Util,b=function(b){function h(d,c){var m=this;b.call(this,d.frame,f.createChildDivElement(c.div,"prostyle prostyle-camera"));this.story=d;this.frameElem=c;this.flowElems=[];this.resize();d.flows.forEach(function(c,b){var d=void 0,d="simple"===c.flowType?a.Flows.SimpleFlow:e.Serialization.FlowReader.lookupExtension(c.flowType.toLowerCase()).Renderer;m.flowElems.push(new d(c,
m,b))})}__extends(h,b);h.prototype.resize=function(){var a=this.frameElem.size,c=(100-this.story.frame.padding)/100,a=new e.Types.Size(a.width*c,a.height*c);1>a.width&&(a.width=1);1>a.height&&(a.height=1);this.size=a;TweenLite.set(this.div,{width:this.size.width,height:this.size.height,clearProps:"transform"})};h.prototype.stepStopped=function(a,c){a.pause(c.stopLabel)};return h}(a.Visual);a.Camera=b;f=e.Util;b=function(b){function h(d,c){b.call(this,d.frame,f.createChildDivElement(c.div,"prostyle prostyle-frame"));
this.story=d;this.canvasElem=c;this.resize();this.cameraElem=new a.Camera(d,this)}__extends(h,b);h.prototype.stepStopped=function(a,c){a.pause(c.stopLabel)};h.prototype.resize=function(){var a=this.canvasElem.size,c=this.story.frame.aspectRatio,b=(100-this.story.canvas.padding)/100,a=new e.Types.Size(a.width*b,a.height*b);1>a.width&&(a.width=1);1>a.height&&(a.height=1);b=a.aspectRatio();b>c?a.width=a.height*c:b<c&&(a.height=a.width/c);this.size=a;TweenLite.set(this.div,{width:this.size.width,height:this.size.height,
clearProps:"transform"});void 0!==this.cameraElem&&this.cameraElem.resize()};return h}(a.Visual);a.Frame=b})(e.Render||(e.Render={}));(function(a){(function(a){var b=function(){function a(){this.handlers=[]}a.prototype.on=function(a){this.handlers.push(a)};a.prototype.off=function(a){this.handlers=this.handlers.filter(function(b){return b!==a})};a.prototype.trigger=function(a){this.handlers&&this.handlers.slice(0).forEach(function(b){return b(a)})};a.prototype.dispose=function(){this.handlers=[]};
return a}();a.LiteEvent=b})(a.Events||(a.Events={}))})(e.Util||(e.Util={}));(function(a){var f=e.Util.Events,b=e.Render,g=function(){function a(b){this.frame=b;this.steps=[];this.animating=!1;this.currentSubStep=0;this.state={progress:0,time:0,step:void 0,subStep:0};this.progressChanged=new f.LiteEvent;this.stateChanged=new f.LiteEvent;this.stepComplete=new f.LiteEvent;this.refreshTimeline(b);this.currentStep=this.getStepAtTime(0)}a.prototype.refreshTimeline=function(a){var c=this,e=0,f=!0;void 0!==
this.timeline&&(e=this.timeline.time(),f=this.isPaused(),this.timeline.kill());this.timeline=(new b.Timeline(a,this.triggerProgressChanged.bind(this))).timeline;this.steps=[];var t=0;a.cameraElem.flowElems.forEach(function(a){a.pageElems.forEach(function(a){a.steps.forEach(function(a){a.playerStepIndex=t;t++;c.steps.push(a);c.timeline.addCallback(c.triggerStepComplete.bind(c),a.stopLabel,[a])})})});this.currentStep=void 0===this.currentStep?this.steps[0]:this.steps[Math.min(this.currentStep.playerStepIndex,
this.steps.length-1)];this.moveTo(e,!1,!f)};a.prototype.isAtStoryStart=function(){return.02>this.timeline.time()};a.prototype.isAtStoryEnd=function(){var a=this.timeline.time(),c=this.timeline.duration();return.02>Math.abs(c-a)};a.prototype.isAtStepStart=function(a){void 0===a&&(a=!1);return this.currentStep.isAtStart(this.timeline.time())?(a&&this.timeline.seek(this.currentStep.startLabel),!0):!1};a.prototype.isAtStepEnd=function(){return this.currentStep.isAtEnd(this.timeline.time())};a.prototype.isPaused=
function(){return this.timeline.paused()};a.prototype.isFirstStep=function(){return 0===this.currentStep.playerStepIndex};a.prototype.isLastStep=function(){return this.currentStep.playerStepIndex===this.steps.length-1};a.prototype.triggerStateChanged=function(){this.stateChanged.trigger(this.timeline.paused())};a.prototype.triggerProgressChanged=function(){var a=this.state;a.time=this.timeline.time();a.progress=this.timeline.progress();if(a.time<this.currentStep.startTime||a.time>this.currentStep.stopTime)this.currentStep=
this.getStepAtTime(a.time);a.step=this.currentStep;this.progressChanged.trigger(a)};a.prototype.triggerStepComplete=function(a){this.animating||(this.timeline.pause(a.stopTime),this.stepComplete.trigger(a))};a.prototype.getNextStep=function(a){void 0===a&&(a=!0);var c=this.currentStep.playerStepIndex+1;c>=this.steps.length&&(c=a?0:this.currentStep.playerStepIndex);return this.steps[c]};a.prototype.getPriorStep=function(){var a=this.currentStep.playerStepIndex-1;0>a&&(a=this.steps.length-1);return this.steps[a]};
a.prototype.getStepAtTime=function(a){if(a>=this.currentStep.startTime&&a<=this.currentStep.stopTime)return this.currentStep;for(var c=this.steps[0],b=1;b<this.steps.length;b++){var e=this.steps[b];if(e.startTime>a)break;c=e}return c};a.prototype.moveTo=function(a,c,b){var e=this;.01>a&&(a=.01);var f=this.getStepAtTime(a),n=f.isAtStart(a),p=f.isAtEnd(a),h=Math.abs(this.timeline.time()-a);0<h&&c?(c=Math.max(.1,Math.min(h/5,1.5)),this.alignSequencedItemsToStep(f,n,p,!0),this.animating=!0,(new TimelineLite).to(this.timeline,
c,{time:a,ease:Circ.easeOut,onComplete:function(){e.timeline.pause(a);e.animating=!1;b&&e.thenPlay(p,!0);e.triggerProgressChanged();e.triggerStateChanged()}})):(this.timeline.pause(a),b&&this.thenPlay(p),this.triggerProgressChanged())};a.prototype.thenPlay=function(a,c){void 0===c&&(c=!0);a?0<this.getRemainingSubStepCount()?this.playSubStep(this.currentSubStep+1):(this.currentStep=this.getNextStep(!0),this.timeline.seek(this.currentStep.startTime,!0),this.isFirstStep()?this.alignSequencedItemsToStep(this.currentStep,
!0,!1,!1):this.playSubStep(0,!1),c&&(this.timeline.play(),this.playSubStep(1))):(this.timeline.play(),this.playSubStep(1));this.triggerStateChanged()};a.prototype.seek=function(a,c){void 0===c&&(c=!1);a=Math.max(0,Math.min(a,1));var b=this.timeline.duration()*a;this.moveTo(b,c,!1);this.currentStep=this.getStepAtTime(b);this.alignSequencedItemsToStep(this.currentStep,this.currentStep.isAtStart(b),this.currentStep.isAtEnd(b),!1)};a.prototype.seekStep=function(a,c){void 0===c&&(c=!1);this.timeline.pause();
this.timeline.seek(a.startLabel);this.currentStep=a;this.alignSequencedItemsToStep(a,!0,!1,c);this.triggerProgressChanged();this.triggerStateChanged()};a.prototype.alignSequencedItemsToStep=function(a,c,b,e){var f=this;void 0===e&&(e=!1);var n=!0;this.steps.forEach(function(p){var h=p===a;h&&(n=!1);if(!h||!b){var g=0,g=p===a?c?0:1:n?-1:0;p.sequencedItems.forEach(function(a){a.moveToSubStep(g,e,f.frame.cameraElem.size)})}})};a.prototype.playSubStep=function(a,c){var b=this;void 0===c&&(c=!0);this.currentSubStep=
a;this.currentStep.sequencedItems.forEach(function(e){e.moveToSubStep(a,c,b.frame.cameraElem.size)});this.state.subStep=Math.max(0,this.currentSubStep-1);this.progressChanged.trigger(this.state)};a.prototype.getRemainingSubStepCount=function(){return Math.max(0,this.currentStep.getSubStepCount()-this.currentSubStep)};a.prototype.togglePlay=function(){this.isPaused()?this.isAtStoryEnd()?this.seekStep(this.steps[0]):this.playCurrentStep():this.pause()};a.prototype.playCurrentStep=function(){this.isAtStepStart(!0)&&
this.playSubStep(1);this.timeline.play();this.triggerStateChanged()};a.prototype.playNextStep=function(a){void 0===a&&(a=!1);this.isAtStepStart()?this.moveTo(this.currentStep.startTime,!1,!0):this.moveTo(this.currentStep.stopTime,a,!0)};a.prototype.backStep=function(a){void 0===a&&(a=!1);this.isAtStepEnd()&&1<this.currentSubStep?this.playSubStep(this.currentSubStep-1):this.isFirstStep()&&(0<this.currentSubStep||this.timeline.time()>this.currentStep.startTime)?this.animating||(this.moveTo(this.currentStep.startTime,
!0,!1),this.playSubStep(0)):this.isAtStoryStart()?this.animating||(this.currentStep=this.steps[this.steps.length-1],this.timeline.pause(this.currentStep.stopTime),this.alignSequencedItemsToStep(this.currentStep,!1,!0,!1),this.playSubStep(this.currentStep.getSubStepCount()),this.triggerProgressChanged()):(this.currentStep=this.getPriorStep(),this.playSubStep(this.currentStep.getSubStepCount()),this.moveTo(this.currentStep.stopTime,a,!1))};a.prototype.pause=function(){this.timeline.pause();this.triggerStateChanged()};
return a}();a.Player=g;g=function(){function b(){}b.prototype.resize=function(){};b.byConfig=function(b,c){if(void 0!==c&&"track"===(c.type||"").toString().trim().toLowerCase())return new a.TrackControls(b,c)};return b}();a.Controls=g})(e.Play||(e.Play={}));(function(a){var f=e.Util,b=function(b){function h(d,c,m){void 0===m&&(m={});b.call(this,d.canvas,c);this.story=d;f.setElementText(c,"");this.fullScreen=c instanceof HTMLBodyElement;this.generateStyles();this.setCanvasSize();this.listenForResize(m);
this.frameElem=new a.Frame(this.story,this);this.player=new e.Play.Player(this.frameElem);this.controls=e.Play.Controls.byConfig(this,m.controls);this.autoPlay=new e.Play.AutoPlay(this,m.auto);this.keyboard=new e.Play.KeyboardPlay(this,m.keyboard);m.mouseWheel&&this.setupMouseWheel();m.debugBar&&this.showDebugBar();this.hideContextMenu()}__extends(h,b);h.prototype.resize=function(a){void 0===a&&(a=!1);if(this.setCanvasSize()||a)this.frameElem.resize(),this.controls&&this.controls.resize(),this.player.refreshTimeline(this.frameElem)};
h.prototype.listenForResize=function(a){a.auto=a.auto||{};void 0===a.auto.resize&&(a.auto.resize=!0);a.auto.resize&&window.addEventListener("resize",f.throttle(this.resize.bind(this),3),!1)};h.prototype.setCanvasSize=function(){if(this.fullScreen)return this.size=new e.Types.Size(this.div.clientWidth,this.div.clientHeight),!0;var a=this.div.clientWidth;if(void 0!==this.size&&a===this.size.width)return!1;var c=this.story.canvas.padding/100*a;this.div.style.height=(a-c)/this.story.frame.aspectRatio+
c+"px";TweenLite.set(this.div,{clearProps:"transform"});this.size=new e.Types.Size(this.div.clientWidth,this.div.clientHeight);return!0};h.prototype.generateStyles=function(){var a=f.getStyleElement("prostyle-styles"),c={selectors:[]};this.fullScreen&&(c.selectors.push("html"),c.html={height:"100%"},c.selectors.push("body"),c.body={height:"100%",margin:0,overflow:"hidden"});c.selectors.push(".prostyle");c[".prostyle"]={position:"absolute",transform:"translate(-50%,-50%) translate3d(0, 0, 0)",top:"50%",
left:"50%"};c.selectors.push(".prostyle.prostyle-frame");c[".prostyle.prostyle-frame"]={position:"relative"};c.selectors.push(".prostyle.prostyle-camera");c[".prostyle.prostyle-camera"]={position:"relative",transformStyle:"preserve-3d"};c.selectors.push(".prostyle.prostyle-flow");c[".prostyle.prostyle-flow"]={width:"100%",height:"100%",transformStyle:"preserve-3d"};c.selectors.push(".prostyle.prostyle-page");c[".prostyle.prostyle-page"]={width:"100%",height:"100%",transformStyle:"preserve-3d"};c.selectors.push(".prostyle.prostyle-item");
c[".prostyle.prostyle-item"]={userSelect:"none",whiteSpace:"nowrap"};c.selectors.push(".prostyle.prostyle-item.unknown");c[".prostyle.prostyle-item.unknown"]={fontSize:"24px",fontWeight:"bold",color:"#C00",padding:"1% 1%",backgroundColor:"#FFF",border:"solid 3px #C00",opacity:.6};c.selectors.push(".prostyle.prostyle-layer");c[".prostyle.prostyle-layer"]={transformStyle:"preserve-3d"};c.selectors.push(".prostyle.prostyle-text");c[".prostyle.prostyle-text"]={userSelect:"none",whiteSpace:"nowrap",transformStyle:"preserve-3d"};
c.selectors.push(".prostyle-text-line");c[".prostyle-text-line"]={position:"relative",display:"block",transformStyle:"preserve-3d"};c.selectors.push(".prostyle-text-line-stacked");c[".prostyle-text-line-stacked"]={position:"absolute",display:"block",transformStyle:"preserve-3d"};c.selectors.push(".prostyle-text-word");c[".prostyle-text-word"]={position:"relative",display:"inline-block",transformStyle:"preserve-3d"};c.selectors.push(".prostyle-text-word-stacked");c[".prostyle-text-word-stacked"]={position:"absolute",
display:"inline-block",transformStyle:"preserve-3d"};c.selectors.push(".prostyle-text-char");c[".prostyle-text-char"]={position:"relative",display:"inline-block"};c.selectors.push(".prostyle-text-char-stacked");c[".prostyle-text-char-stacked"]={position:"absolute",display:"inline-block"};a.innerHTML=f.encodeStyleSheet(c)};h.prototype.setupMouseWheel=function(){var a=this;this.div.addEventListener("wheel",function(c){var b=c.ctrlKey?c.altKey?.001:1:c.altKey?.01:.1,e=a.player.timeline.totalTime(),h=
f.convertToNumber(c.deltaY,-1),e=Math.round((e+(0>h?b:-b))/b)*b,b=a.player.timeline.totalDuration();.01>e?e=b:e>b&&(e=.01);a.player.timeline.totalTime(e);a.player.timeline.pause(e);a.autoPlay.pause();c.preventDefault();return!1})};h.prototype.hideContextMenu=function(){this.div.oncontextmenu=function(a){}};h.prototype.showDebugBar=function(){var a=f.createChildDivElement(this.div);TweenLite.set(a,{position:"absolute",backgroundColor:"black",color:"white",fontSize:14,padding:3,top:0,left:0});this.player.progressChanged.on(function(c){a.innerHTML=
c.time.toFixed(3)+" ("+Math.round(100*c.progress)+"%) "+c.step.label+c.subStep})};return h}(a.Visual);a.Canvas=b})(e.Render||(e.Render={}));(function(a){var f=e.Util,b=function(){function a(b,c){this.canvasElem=b;c=(this.config=c)||{};c.advance=!!c.advance;c.advanceDelay=f.convertToNumber(c.advanceDelay);c.restart=!!c.restart;c.start=!!c.start;var e=this.canvasElem.player;e.stepComplete.on(this.stepComplete.bind(this));e.pause();c.start&&setTimeout(function(){e.playCurrentStep()},1E3)}a.prototype.stepComplete=
function(a){var c=this.canvasElem.player;c.pause();!this.config.advance||c.isAtStoryEnd()&&!this.config.restart?c.timeline.seek(a.stopTime,!0):(a=void 0==a.step.autoAdvanceDelay?f.convertToNumber(this.config.advanceDelay):f.convertToNumber(a.step.autoAdvanceDelay),0>=a?c.playNextStep():(clearTimeout(this.timeout),this.timeout=setTimeout(function(){c.playNextStep()},a)))};a.prototype.pause=function(){clearTimeout(this.timeout)};return a}();a.AutoPlay=b;f=e.Util;b=function(){function a(b,c){this.canvasElem=
b;this.config=c;void 0!==c&&!1!==c&&(this.player=b.player,"object"!==typeof c&&(c=this.getDefaultConfig()),this.listenForKeyPresses(c))}a.prototype.getDefaultConfig=function(){return{play:[13,116],pause:[19,27],togglePlay:[32],back:[8,33,37,38,188],playNext:[34,39,40,9],start:[36,190],end:[35]}};a.prototype.listenForKeyPresses=function(a){var c={},b;b=0+this.mapKeys(c,a.end,this.end.bind(this));b+=this.mapKeys(c,a.start,this.start.bind(this));b+=this.mapKeys(c,a.back,this.back.bind(this));b+=this.mapKeys(c,
a.pause,this.pause.bind(this));b+=this.mapKeys(c,a.play,this.play.bind(this));b+=this.mapKeys(c,a.togglePlay,this.togglePlay.bind(this));b+=this.mapKeys(c,a.playNext,this.playNext.bind(this));0!==b&&(document.addEventListener("keydown",function(a){if(!a.ctrlKey){var b=a.keyCode;(c[b]instanceof Function||9===b)&&a.preventDefault()}},!1),document.addEventListener("keyup",function(a){if(!a.ctrlKey){var b=a.keyCode,d=c[b];if(d instanceof Function||9===b)d instanceof Function&&d(),a.preventDefault()}},
!1))};a.prototype.mapKeys=function(a,c,b){var e=0;c instanceof Array&&c.forEach(function(c){c=f.convertToNumber(c);0<c&&(a[c]=b,e++)});return e};a.prototype.play=function(){this.player.playCurrentStep()};a.prototype.pause=function(){this.player.pause()};a.prototype.togglePlay=function(){this.player.togglePlay()};a.prototype.back=function(){this.player.backStep(!0)};a.prototype.playNext=function(){this.player.playNextStep(!0)};a.prototype.start=function(){this.player.seekStep(this.player.steps[0],
!1)};a.prototype.end=function(){this.player.seekStep(this.player.steps[0],!1);this.player.backStep(!1)};return a}();a.KeyboardPlay=b;var f=e.Util,g=e.Svg,b=function(a){function b(c,d){a.call(this);this.canvasElem=c;this.config=d;this.COLOR="#BBB";this.HIGHLIGHT_COLOR="#FFF";this.BACK_COLOR="#222";this.STEP_COLOR_1="#444";this.STEP_COLOR_2="#555";this.divScrubberStep=[];this.progress=0;this.generateStyles();this.setupButtons();this.setupScrubber();this.setupPlayerEvents();this.setupMenuOnMouseMove();
this.resize()}__extends(b,a);b.prototype.setupButtons=function(){var a=this.canvasElem.player;this.bgDiv=f.createChildDivElement(this.canvasElem.div,this.bgClass);this.logoDiv=this.addButton("ProStyle",g.logo.svg,function(){window.open("http://prostyle.io/","_blank")});this.backDiv=this.addButton("Back",g.toStart.svg,function(){a.backStep(!0)});this.playDiv=this.addButton("Play",g.play.svg,function(){a.togglePlay()});this.nextDiv=this.addButton("Play Next",g.fastForward.svg,function(){a.playNextStep(!0)})};
b.prototype.setupScrubber=function(){var a=this.canvasElem.player;this.divScrubber=f.createChildDivElement(this.bgDiv,this.scrubberClass);this.divScrubberBar=f.createChildDivElement(this.divScrubber,this.scrubberBarClass);for(a=a.steps.length-1;0<=a;a--)this.divScrubberStep.push(f.createChildDivElement(this.divScrubberBar,this.scrubberStepClass));this.divScrubberProgress=f.createChildDivElement(this.divScrubberBar,this.scrubberProgressClass);this.divScrubberHoverPoint=f.createChildDivElement(this.divScrubberBar,
this.scrubberHoverPointClass);this.divScrubberHoverText=f.createChildDivElement(this.divScrubber,this.scrubberHoverTextClass);this.divScrubber.onmousemove=this.scrubberMouseMove.bind(this);this.divScrubber.onclick=this.scrubberMouseClick.bind(this)};b.prototype.scrubberMouseMove=function(a){var b=this.canvasElem.div.getBoundingClientRect(),d=this.canvasElem.player,e=this.scrubberSize,n=e.width-e.barHeight,p=e.barHeight/2;a=Math.max(p,Math.min(a.clientX-b.left-e.left,e.width-p))-e.barHeight;this.divScrubberHoverPoint.style.left=
(a+p+p/2-1).toString()+"px";d=d.timeline.duration()*(a+p)/n;this.divScrubberHoverText.style.left=a.toString()+"px";f.setElementText(this.divScrubberHoverText,d.toFixed(2))};b.prototype.scrubberMouseClick=function(a){var b=this.canvasElem.div.getBoundingClientRect(),d=this.canvasElem.player,e=this.scrubberSize,n=e.width-e.barHeight,p=e.barHeight/2;a=Math.max(p,Math.min(a.clientX-b.left-e.left,e.width-p))-e.barHeight;d.seek((a+p)/n,!0)};b.prototype.setupPlayerEvents=function(){var a=this.canvasElem.player;
a.progressChanged.on(this.progressChanged.bind(this));a.stateChanged.on(this.stateChanged.bind(this))};b.prototype.setupMenuOnMouseMove=function(){var a=this.canvasElem.div,b=this.canvasElem.fullScreen,d=f.throttle(function(){a.classList.remove("mouseMovement");b&&(a.style.cursor="none")},3E3);a.onmousemove=function(e){a.classList.add("mouseMovement");b&&(a.style.cursor="auto");d()}};b.prototype.progressChanged=function(a){this.progress=a.progress;this.updateScrubberProgress()};b.prototype.stateChanged=
function(a){this.playDiv.innerHTML=a?g.play.svg:g.pause.svg};b.prototype.resize=function(){var a=this.canvasElem.div.clientWidth,b=this.canvasElem.div.clientHeight,d=Math.min(Math.max(40,Math.min(a/12,200)),Math.max(40,Math.min(b/12,200))),e=Math.max(5,d/3);TweenMax.set(this.bgDiv,{left:0,top:b-d,width:a,height:d});var b=.9*d,n=.88*d,p=.53*d,f=.6*d,h=a-n-p-f-3.2*e;TweenMax.set(this.logoDiv,{left:e/2,top:0,height:d,width:b});TweenMax.set(this.nextDiv,{left:a-n-e,top:0,height:d,width:n});TweenMax.set(this.playDiv,
{left:a-n-p-2*e,top:0,height:d,width:p});TweenMax.set(this.backDiv,{left:h,top:0,height:d,width:f});this.scrubberSize={left:b+e,width:h-b-2*e,height:d,barHeight:d/3};this.resizeScrubber();this.updateScrubberProgress()};b.prototype.resizeScrubber=function(){var a=this,b=this.scrubberSize,d=this.canvasElem.player,e=d.steps.length-1,n=d.timeline.duration(),p=b.barHeight/2,f=b.width-b.barHeight;this.divScrubber.style.left=b.left+"px";this.divScrubber.style.width=b.width+"px";this.divScrubber.style.height=
b.height+"px";this.divScrubberBar.style.width=b.width+"px";this.divScrubberBar.style.top=(b.height-b.barHeight)/2+"px";this.divScrubberBar.style.height=b.barHeight+"px";this.divScrubberBar.style.borderRadius=p+"px";d.steps.forEach(function(d,h){var g=a.divScrubberStep[e-h];g.style.left=(f*d.startTime/n).toString()+"px";g.style.width=(f*d.time/n+b.barHeight).toString()+"px";g.style.height=b.barHeight+"px";g.style.borderRadius=p+"px"});this.divScrubberHoverPoint.style.height=p+"px";this.divScrubberHoverPoint.style.width=
p+"px";this.divScrubberHoverPoint.style.top=(b.barHeight/4-1).toString()+"px";this.divScrubberHoverPoint.style.borderRadius=p+"px";this.divScrubberHoverText.style.fontSize=.9*b.barHeight+"px";this.divScrubberProgress.style.height=b.barHeight+"px";this.divScrubberProgress.style.borderRadius=p+"px";this.updateScrubberProgress()};b.prototype.updateScrubberProgress=function(){var a=this.scrubberSize;this.divScrubberProgress.style.width=((a.width-a.barHeight)*this.progress+a.barHeight).toString()+"px"};
b.prototype.generateStyles=function(){var a=(new Date).getTime().toString();this.bgClass="controls-bg-"+a;this.btnClass="controls-btn-"+a;this.scrubberClass="scrubber-"+a;this.scrubberBarClass="scrubber-back-"+a;this.scrubberStepClass="scrubber-step-"+a;this.scrubberProgressClass="scrubber-progress-"+a;this.scrubberHoverPointClass="scrubber-point-"+a;this.scrubberHoverTextClass="scrubber-text-"+a;var a=f.getStyleElement("prostyle-track-controls-"+a),b={selectors:[]};b.selectors.push("."+this.bgClass);
b["."+this.bgClass]={transition:"opacity 1s ease-in-out, transform 1s ease-in-out",backgroundColor:this.config.backColor||this.BACK_COLOR,position:"absolute",display:"inline-block",opacity:0,transform:"translate3d(0, 0, 20px)"};b.selectors.push(".mouseMovement ."+this.bgClass);b[".mouseMovement ."+this.bgClass]={opacity:.5,transform:"translate3d(0, 0, 0)"};b.selectors.push("."+this.bgClass+":hover");b["."+this.bgClass+":hover"]={opacity:.8};b.selectors.push("."+this.bgClass+" div");b["."+this.bgClass+
" div"]={position:"absolute"};b.selectors.push("."+this.btnClass);b["."+this.btnClass]={cursor:"pointer"};b.selectors.push("."+this.btnClass+" svg");b["."+this.btnClass+" svg"]={fill:this.config.color||this.COLOR,width:"100%",height:"100%"};b.selectors.push("."+this.btnClass+":hover svg");b["."+this.btnClass+":hover svg"]={fill:this.config.highlightColor||this.HIGHLIGHT_COLOR};b.selectors.push("."+this.scrubberClass);b["."+this.scrubberClass]={cursor:"none"};b.selectors.push("."+this.scrubberBarClass);
b["."+this.scrubberBarClass]={};b.selectors.push("."+this.scrubberStepClass);b["."+this.scrubberStepClass]={borderRight:"solid 2px "+(this.config.backColor||this.BACK_COLOR),backgroundColor:this.config.stepColor1||this.STEP_COLOR_1,background:"linear-gradient(to right, "+(this.config.stepColor1||this.STEP_COLOR_1)+", "+(this.config.stepColor2||this.STEP_COLOR_2)+")"};b.selectors.push("."+this.scrubberProgressClass);b["."+this.scrubberProgressClass]={backgroundColor:this.config.color||this.COLOR};
b.selectors.push("."+this.scrubberHoverPointClass);b["."+this.scrubberHoverPointClass]={border:"solid 1px "+(this.config.backColor||this.BACK_COLOR),backgroundColor:this.config.highlightColor||this.HIGHLIGHT_COLOR,display:"none"};b.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberHoverPointClass);b["."+this.scrubberClass+":hover ."+this.scrubberHoverPointClass]={display:"block"};b.selectors.push("."+this.scrubberHoverTextClass);b["."+this.scrubberHoverTextClass]={color:this.config.color||
this.COLOR,fontFamily:"font-family: arial, helvetica, sans-serif",display:"none"};b.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberHoverTextClass);b["."+this.scrubberClass+":hover ."+this.scrubberHoverTextClass]={display:"block"};a.innerHTML=f.encodeStyleSheet(b)};b.prototype.addButton=function(a,b,d){var e=f.createChildDivElement(this.bgDiv,this.btnClass);e.className=this.btnClass;e.innerHTML=b;e.title=a;e.addEventListener("mousedown",function(a){d();a.preventDefault();a.stopPropagation();
return!1});return e};return b}(a.Controls);a.TrackControls=b})(e.Play||(e.Play={}));(function(a){(function(b){var f=e.Util,d=e.Models.Properties,c=function(){function b(){}b.generateTimeline=function(c,e,n,p,f,h,g){void 0===g&&(g=void 0);var k=b.getMoveTo(p.properties,c.items),l=[];for(c=0;c<n.length;c++)l.push({force3D:!0,immediateRender:!1,delay:p.delay,element:n[c],elementIndex:c});var q=0,r=0,y=p.script.scriptSet.itemSet.flow.story;p.properties.forEach(function(a){a.type instanceof d.AnimationPropertyType?
(r=a.duration.getValue()||0,q=a.stagger.getValue()||0,0<r&&a.writeCssBuckets(y,e.model,h,l,!1)):void 0!==k&&(a.type instanceof d.MoveToPropertyType||a.type instanceof d.PositionPropertyType||a.type instanceof d.RotationPropertyType||a.type instanceof d.ScalePropertyType||a.type instanceof d.SkewPropertyType)||a.writeCssBuckets(y,e.model,h,l,!1)});a.Visual.postProcessCssBuckets(l,g,p.properties,h);p=f.totalDuration();for(c=0;c<n.length;c++)0<r?f.to(n[c],r,l[c],p):f.set(n[c],l[c],p),p+=q;return k};
b.getMoveTo=function(a,b){var c=void 0;a.forEach(function(a){a.type instanceof d.MoveToPropertyType&&(c=a.getVariable("item").getValue(),void 0!==c&&(0>c||c>b.length)&&(c=void 0))});return c};b.generateMoveTo=function(a,b,c){if(b){var d=f.getGSTransform(b),e=[];(d.x||d.y||d.z)&&e.push("translate3d("+-d.x+"px,"+-d.y+"px,"+-d.z+"px)");d.rotationX&&e.push("rotateX("+-d.rotationX+"deg)");d.rotationY&&e.push("rotateY("+-d.rotationY+"deg)");d.rotation&&e.push("rotate("+-d.rotation+"deg)");var g=Math.max(0,
Math.min(0===d.scaleX?1:1/d.scaleX,10)),k=Math.max(0,Math.min(0===d.scaleY?1:1/d.scaleY,10));1!==d.scaleX&&e.push("scaleX("+g+")");1!==d.scaleY&&e.push("scaleY("+k+")");d.skewX&&e.push("skewX("+-d.skewX+"deg)");console.log(e.join(" "));console.log(b._gsTransform);b={transform:e.join(" "),xPercent:-50,yPercent:-50};c.to(a,1.2,b)}};return b}();b.SetPropertiesAction=c})(a.Actions||(a.Actions={}));(function(a){var b=function(a){function b(c,e,f){a.call(this,c,e,f)}__extends(b,a);return b}(a.Flow);a.PlacementFlow=
b})(a.Flows||(a.Flows={}));(function(b){var f=e.Util,d=function(a){function b(d,e){a.call(this,d,e,f.createChildImageElement(e.div,"prostyle prostyle-item",d.itemSet.flow.story.canvas.adjustImageUrl(d.src),d.width,d.height));this.imageItem=d}__extends(b,a);b.prototype.initializeItem=function(a,b){var c=this.imageItem,d=b.getContainedSize(c.itemSet.flow.pageAspectRatio),e={};void 0!==c.width&&(e.width=c.width.toString()+"%");void 0!==c.height&&(e.height=c.height.toString()+"%");this.initializeProperties(c.itemSet.flow.story,
[this.element],d,a,c.init,!1,e)};return b}(b.Item);b.ImageItem=d;f=e.Util;d=function(b){function d(e,g){b.call(this,e,g,f.createChildDivElement(g.div,"prostyle prostyle-layer"));this.layerItem=e;this.items=[];a.Page.createItems(this,e.items)}__extends(d,b);d.prototype.initializeItem=function(a,d){b.prototype.initializeItem.call(this,a,d);this.items.forEach(function(b){b.initializeItem(a,d)})};d.prototype.generateStepActions=function(a,d,e,p,f){var h=this;this.items.forEach(function(a){a.generateStepActions(h,
d,e,p,f)});b.prototype.generateStepActions.call(this,this,d,e,p,f)};return d}(b.Item);b.LayerItem=d;f=e.Util;d=function(a){function b(d,e){a.call(this,d,e,f.createChildDivElement(e.div,"prostyle prostyle-text"));this.textItem=d;this.splitText=void 0;this.chars=this.words=this.lines=!1;this.div.innerHTML=d.text;this.lines=d.stackedLines||0<d.linesScriptSet.scripts.length||d.linesInit.hasAnythingSet();this.words=d.stackedWords||0<d.wordsScriptSet.scripts.length||d.wordsInit.hasAnythingSet();this.chars=
d.stackedChars||0<d.charsScriptSet.scripts.length||d.charsInit.hasAnythingSet();if(this.lines||this.words||this.chars){var n=[];this.lines&&n.push("lines");this.words&&n.push("words");this.chars&&n.push("chars");n={type:n.join(",")};this.lines&&(n.linesClass=d.stackedLines?"prostyle-text-line-stacked":"prostyle-text-line");this.words&&(n.wordsClass=d.stackedWords?"prostyle-text-word-stacked":"prostyle-text-word");this.chars&&(n.charsClass=d.stackedChars?"prostyle-text-char-stacked":"prostyle-text-char");
this.splitText=new window.SplitText(this.div,n)}}__extends(b,a);b.prototype.initializeItem=function(a,b){var c=this.textItem,d=c.itemSet.flow.story,e=b.getContainedSize(c.itemSet.flow.pageAspectRatio),f=this.initializeProperties.bind(this);f(d,[this.div],e,a,c.init,!1);void 0!==this.splitText&&(this.lines&&f(d,this.splitText.lines,e,a,c.linesInit,!1),this.words&&f(d,this.splitText.words,e,a,c.wordsInit,!1),this.chars&&f(d,this.splitText.chars,e,a,c.charsInit,!1))};b.prototype.generateStepActions=
function(a,b,c,d,e){var f=this.textItem,h=this.generateActionsForStep.bind(this);h(a,[this.div],b,c,d,e,f.scriptSet);void 0!==this.splitText&&(this.lines&&h(a,this.splitText.lines,b,c,d,e,f.linesScriptSet),this.words&&h(a,this.splitText.words,b,c,d,e,f.wordsScriptSet),this.chars&&h(a,this.splitText.chars,b,c,d,e,f.charsScriptSet))};return b}(b.Item);b.TextItem=d})(a.Items||(a.Items={}));var f=function(){function a(b,d,c,e,f){this.step=b;this.flowIndex=d;this.pageIndex=c;this.stepIndex=e;this.sequencedItems=
f;this.playerStepIndex=this.time=0;this.label=d.toString()+"-"+c.toString()+"-"+e.toString()+"-";this.startLabel=this.label+"start";this.stopLabel=this.label+"stop";b.startLabel=this.startLabel;b.stopLabel=this.stopLabel}a.prototype.isAtStart=function(a){return.02>Math.abs(a-this.startTime)};a.prototype.isAtEnd=function(a){return.02>Math.abs(a-this.stopTime)};a.prototype.getSubStepCount=function(){var a=0;this.sequencedItems.forEach(function(b){a=Math.max(a,b.getCountOfSubSteps())});return a};return a}();
a.Step=f;var b=e.Types,f=function(){function a(b,d){this.generateTimeline(b,d)}a.prototype.generateTimeline=function(a,d){var c=this;TweenMax.defaultOverwrite="none";TweenMax.defaultEase=b.Eaze.DEFAULT.ease;void 0!==this.timeline&&this.timeline.kill();this.timeline=new TimelineMax({autoRemoveChildren:!1,onUpdate:d});this.timeline.addLabel("initialize",0);var e=a.story,f=a.canvasElem,g=f.size,n=a.size,p=a.cameraElem,k=p.size,l={fontFamily:"arial"};f.fullScreen||(l.height=g.height);f.initializeProperties(e,
[f.div],k,this.timeline,e.canvas.init,!1,l);l={width:n.width,height:n.height};a.initializeProperties(e,[a.div],k,this.timeline,e.frame.init,!1,l);p.flowElems.forEach(function(b){var d=k.getContainedSize(b.pageAspectRatio());b.pageElems.forEach(function(b){b.initializeProperties(e,[b.div],d,c.timeline,b.page.init,!1);b.items.forEach(function(b){b.initializeItem(c.timeline,a.cameraElem.size)})});b.initializePlacement(c.timeline)});var q=void 0;p.flowElems.forEach(function(a){q=a.generateStepsActions(c.timeline,
q)});return this.timeline};return a}();a.Timeline=f})(e.Render||(e.Render={}));(function(a){var f=e.Models.Actions,b=e.Util,g=function(){function c(){}c.readArray=function(a,b){var d=[];b instanceof Array&&b.forEach(function(b){d.push(c.read(a,b))});return d};c.read=function(a,b){b=b||{};f.ActionType.fromString(b.actionType);return c.readPropertiesAction(a,b)};c.readPropertiesAction=function(c,d){var e=a.PropertyListReader.read(c.scriptSet.itemSet.story,d,c.scriptSet.itemProperties).properties;return new f.SetPropertiesAction(c,
b.convertToNumber(d.delay),e)};return c}();a.ActionReader=g;f=e.Models.Actions;g=function(){function b(){}b.writeArray=function(a){var b=[];a.forEach(function(a){b.push(a.saveJson())});return b};b.write=function(a){return b.writePropertiesAction(a)};b.writePropertiesAction=function(b){var c={actionType:f.ActionType.toString(b.actionType)};a.PropertyWriter.writeSet(c,b.properties);b.delay&&(c.delay=b.delay);return c};return b}();a.ActionWriter=g;g=function(){function a(){}a.read=function(a,b){return"boolean"===
typeof b?a.createPropertyFromBoolean(b):"number"===typeof b?a.createPropertyFromNumber(b):"string"===typeof b?a.createPropertyFromString(b):b instanceof Array?a.createPropertyFromArray(b):a.createPropertyFromObject(b)};return a}();a.PropertyReader=g;var h=e.Models.Properties,g=function(){function b(){}b.read=function(c,d,f,g,k,l){void 0===g&&(g=void 0);void 0===k&&(k=void 0);void 0===l&&(l=[]);d=d||{};var m=[];f.forEach(function(b){"class"===b.jsonNames[0]&&d.hasOwnProperty("class")&&(b=a.PropertyReader.read(b,
d["class"]).getVariable("name").getValue())&&(g=b.trim(),k={})});var q=void 0;g&&-1===l.indexOf(g)&&(l.push(g),k=(c.classes||{})[g]||k,void 0!==k&&(q=b.read(c,k,f,void 0,void 0,l)));var r=e.Util.lowercaseProperties(d);f.forEach(function(b){var c=void 0,d=void 0;void 0!==q&&(d=q.getPropertyOfType(b));for(var e=0;e<b.jsonNames.length;e++){var n=b.jsonNames[e];if(r.hasOwnProperty(n)){c=a.PropertyReader.read(b,r[n]);break}}void 0!==d&&(void 0===c&&(c=new h.Property(b)),b.variableTypes.forEach(function(a){var b=
c[a.jsonNames[0]];a=d[a.jsonNames[0]];if(void 0!==a){var e=a.getValue(!1);void 0===e&&(e=a.defaultValueOverride);void 0!==e&&(b.defaultValueOverride=e)}}));void 0!==c&&m.push(c)});return new h.PropertyList(f,m)};return b}();a.PropertyListReader=g;h=e.Models.Properties;g=function(){function b(){}b.read=function(b){b=b||{};b.init=b.init||{};b.init.crop=void 0===b.init.crop?!0:b.init.crop;var c=a.PropertyListReader.read(void 0,b.init,h.PerElement.Canvas.getPropertyTypes()),d=Math.max(0,Math.min(e.Util.convertToNumber(e.Util.getSetup(b,
"padding"),0),50));return new e.Models.Canvas(c,d,e.Util.getSetup(b,"imageRootUrl"))};return b}();a.CanvasReader=g;g=function(){function a(){}a.write=function(a){var b={setup:{}};b.setup.padding=a.padding;return b};return a}();a.CanvasWriter=g;g=function(){function b(){}b.write=function(b){var c={setup:{}};c.flowType=b.flowType;var d=a.Flows["write_"+c.flowType];void 0===d?e.Util.logError("FlowWriter.write()","Unknown Flow Type ("+c.flowType+")"):d(b,c);c.pages=[];b.pages.forEach(function(b){c.pages.push(a.PageWriter.write(b))});
return c};return b}();a.FlowWriter=g;(function(a){var b=e.Models,c=e.Util;a.read_simple=function(a,d){var f=d.setup||{},h=e.Types.Placement.fromJson(f.placement),g=c.convertToNumber(f.pageAspectRatio,a.frame.aspectRatio);return new b.Flows.SimpleFlow(a,h,f.defaultPageClass,g)};a.write_simple=function(a,b){}})(a.Flows||(a.Flows={}));h=e.Models.Properties;g=function(){function b(){}b.read=function(c){c=c||{};c.init=c.init||{};var d=a.PropertyListReader.read(void 0,c.init,h.PerElement.Frame.getPropertyTypes()),
f=e.Util.convertToNumber(e.Util.getSetup(c,"aspectRatio")||b.DEFAULT_ASPECT_RATIO,b.DEFAULT_ASPECT_RATIO);c=Math.max(0,Math.min(e.Util.convertToNumber(e.Util.getSetup(c,"padding"),0),50));return new e.Models.Frame(d,f,c)};b.DEFAULT_ASPECT_RATIO=16/9;return b}();a.FrameReader=g;g=function(){function a(){}a.write=function(a){var b={setup:{}};b.setup.aspectRatio=a.aspectRatio;b.setup.padding=a.padding;return b};return a}();a.FrameWriter=g;g=function(){function b(){}b.write=function(b){var c={};c.itemType=
b.itemType;c.setup={};var d=a.Items["write_"+c.itemType];void 0===d?((d=e.Extensions.Items[b.itemType])&&d.readJson&&d.writeJson(b,c),e.Util.logError("ItemWriter.write()","Unknown Item Type ("+c.itemType+")")):d(b,c);c.scripts=a.ScriptSetWriter.write(b.scriptSet);return c};return b}();a.ItemWriter=g;var d;(function(b){var c=e.Models,d=e.Util;b.read_image=function(b,e){var f=(d.getSetup(e,"src")||"").trim(),h=d.getSetup(e,"width"),g=d.getSetup(e,"height"),h=isNaN(h)?void 0:Number(h),g=isNaN(g)?void 0:
Number(g),k=c.Properties.PerElement.ImageItem.getPropertyTypes(),l=a.PropertyListReader.read(b.story,e.init,k),k=a.ScriptSetReader.readJson(b,"Image",e,[""],k);return new c.Items.ImageItem(b,f,h,g,l,k)};c=e.Models;b.read_layer=function(b,d){var e=c.Properties.PerElement.LayerItem.getPropertyTypes(),f=a.PropertyListReader.read(b.story,d.init,e),e=a.ScriptSetReader.readJson(b,"Layer",d,[""],e),f=new c.Items.LayerItem(b,f,e);f.items=a.PageReader.readItems(f,d);return f};c=e.Models;d=e.Util;b.read_text=
function(b,e){var f=d.getSetup(e,"text"),h="";if(f instanceof Array){var g=[];f.forEach(function(a){g.push(a.toString())});h=g.join("<br>")}else h=(f||"").toString();var f=!!d.getSetup(e,"stackedLines"),k=!!d.getSetup(e,"stackedWords"),l=!!d.getSetup(e,"stackedChars"),m=c.Properties.PerElement.TextItem,t=m.getPropertyTypes(),q=m.getLinePropertyTypes(),r=m.getWordPropertyTypes(),u=m.getCharPropertyTypes(),m=a.PropertyListReader.read(b.story,e.init,t),v=a.PropertyListReader.read(b.story,e.lineInit||
e.linesInit,q),A=a.PropertyListReader.read(b.story,e.wordInit||e.wordsInit,r),B=a.PropertyListReader.read(b.story,e.charInit||e.charsInit,u),t=a.ScriptSetReader.readJson(b,"Text",e,[""],t),q=a.ScriptSetReader.readJson(b,"Lines",e,["line","lines"],q),r=a.ScriptSetReader.readJson(b,"Words",e,["word","words"],r),u=a.ScriptSetReader.readJson(b,"Characters",e,["char","chars"],u);return new c.Items.TextItem(b,h,f,k,l,m,t,v,q,A,r,B,u)}})(d=a.Items||(a.Items={}));g=function(){function a(){}a.writeSet=function(b,
c){c.forEach(function(c){b[c.type.jsonNames[c.type.jsonNames.length-1]]=a.write(c)})};a.write=function(a){var b={};a.type.variableTypes.forEach(function(c){c=c.jsonNames[c.jsonNames.length-1];var d=a[c].getValue();void 0!==d&&(b[c]=d)});return b};return a}();a.PropertyWriter=g;g=function(){function a(){}a.write=function(a){return{}};return a}();a.PropertyListWriter=g;var c=e.Models.Scripts.ScriptType,g=function(){function b(){}b.write=function(a){var d=a.type,e=void 0,e=0===d?b.writeInitEvent(a):
1===d?b.writeStepEvent(a):2===d?b.writeSwitchEvent(a):3===d?b.writeActionsOrphan(a):4===d?b.writePropertyOrphan(a):{};e.type=c.toString(a.type);e.editor={};e.editor.x=a.x;e.editor.y=a.y;return e};b.writeInitEvent=function(b){var c={};a.PropertyWriter.writeSet(c,b.properties);return c};b.writeStepEvent=function(b){var c={scriptType:"step"};0<b.stepIndex&&(c.scriptType+=b.stepIndex+1);c.actions=a.ActionWriter.writeArray(b.actions);return c};b.writeSwitchEvent=function(b){var c={};c.switch=b.switchName;
c.actions=a.ActionWriter.writeArray(b.actions);return c};b.writeActionsOrphan=function(b){var c={};c.actions=a.ActionWriter.writeArray(b.actions);return c};b.writePropertyOrphan=function(b){var c={};a.PropertyWriter.writeSet(c,b.properties);return c};return b}();a.ScriptWriter=g;(function(b){b.write_image=function(b,c){c.setup=c.setup||{};c.setup.src=b.src;b.width&&(c.setup.class=b.width);b.height&&(c.setup.class=b.height);c.init=a.PropertyListWriter.write(b.init);c.scripts=a.ScriptSetWriter.write(b.scriptSet)};
b.write_layer=function(b,c){c.init=a.PropertyListWriter.write(b.init);c.scripts=a.ScriptSetWriter.write(b.scriptSet);a.PageWriter.writeItems(b,c)};b.write_text=function(b,c){c.setup=c.setup||{};var d=b.text.split("<br>");c.setup.text=1<d.length?d:b.text;b.stackedLines&&(c.setup.stackedLines=!0);b.stackedWords&&(c.setup.stackedWords=!0);b.stackedChars&&(c.setup.stackedChars=!0);c.init=a.PropertyListWriter.write(b.init);c.scripts=a.ScriptSetWriter.write(b.scriptSet);c.lineInit=a.PropertyListWriter.write(b.linesInit);
c.lineScripts=a.ScriptSetWriter.write(b.linesScriptSet);c.wordInit=a.PropertyListWriter.write(b.wordsInit);c.wordScripts=a.ScriptSetWriter.write(b.wordsScriptSet);c.charInit=a.PropertyListWriter.write(b.charsInit);c.charScripts=a.ScriptSetWriter.write(b.charsScriptSet)}})(d=a.Items||(a.Items={}));var k=e.Models;d=e.Models.Items;g=function(){function b(){}b.read=function(c,d){d=d||{};d.init=d.init||{};var e=k.Properties.PerElement.Canvas.getPropertyTypes(),f=k.Properties.PerElement.Frame.getPropertyTypes(),
h=k.Properties.PerElement.Page.getPropertyTypes(),g=a.PropertyListReader.read(c.story,d.init,h,c.getDefaultPageClassName(),c.getDefaultPageClassValue()),g=new k.Page(g,c);g.canvasScriptSet=a.ScriptSetReader.readJson(g,"Canvas",d,["canvas"],e);g.frameScriptSet=a.ScriptSetReader.readJson(g,"Frame",d,["frame"],f);g.pageScriptSet=a.ScriptSetReader.readJson(g,"Page",d,["page"],h);g.items=b.readItems(g,d);g.steps=b.readSteps(g,d,g.items);return g};b.readSteps=function(b,c,e){c=c.steps||[];var f=[];c instanceof
Array&&c.forEach(function(c){f.push(a.StepReader.read(b,c))});var g=1;e.forEach(function(a){g=Math.max(g,a.getCountOfStepsUsed());a instanceof d.SequencedItem&&(g=Math.max(g,a.sequenceOnStepIndex+1))});g=Math.max(g,b.canvasScriptSet.getCountOfStepsUsed());g=Math.max(g,b.frameScriptSet.getCountOfStepsUsed());g=Math.max(g,b.pageScriptSet.getCountOfStepsUsed());if(f.length<g)for(c=g-f.length,e=0;e<c;e++)f.push(a.StepReader.read(b,{}));return f};b.readItems=function(b,c){var d=c.items;void 0===d&&void 0!==
c.item&&(d=[c.item]);var d=d||[],e=[];d instanceof Array&&d.forEach(function(c){e.push(a.ItemReader.read(b,c))});return e};return b}();a.PageReader=g;g=function(){function b(){}b.write=function(c){var d={steps:[]};c.steps.forEach(function(b){d.steps.push(a.StepWriter.write(b))});d.items=[];b.writeItems(c,d);return d};b.writeItems=function(b,c){b.items.forEach(function(b){c.items.push(a.ItemWriter.write(b))})};return b}();a.PageWriter=g;var l=e.Models.Scripts,c=e.Models.Scripts.ScriptType,b=e.Util,
g=function(){function d(){}d.read=function(a,e){e=e||{};e.scriptType=e.scriptType||c.toString(1);var f=c.fromString(e.scriptType),g=void 0,g=1===f?d.readStepEvent(a,e):2===f?d.readSwitchEvent(a,e):3===f?d.readActionsOrphan(a,e):4===f?d.readPropertyOrphan(a,e):d.readInitEvent(a,e);e.editor=e.editor||{};g.x=b.convertToNumber(e.editor.x);g.y=b.convertToNumber(e.editor.y);return g};d.readInitEvent=function(b,c){var d=new l.InitEvent(b);d.properties=a.PropertyListReader.read(b.itemSet.story,c,b.itemProperties).properties;
return d};d.readStepEvent=function(c,d){var e=d.scriptType.slice(4),e=Math.max(0,b.convertToNumber(e,1)-1),e=new l.StepEvent(c,e),f=void 0;void 0!==d.actions?f=d.actions:void 0!==d.action&&(f=[d.action]);e.actions=a.ActionReader.readArray(e,f);return e};d.readSwitchEvent=function(b,c){var d=new l.SwitchEvent(b,c.switch||"");d.actions=a.ActionReader.readArray(d,c.actions);return d};d.readActionsOrphan=function(b,c){var d=new l.ActionsOrphan(b);d.actions=a.ActionReader.readArray(d,c.actions);return d};
d.readPropertyOrphan=function(b,c){var d=new l.PropertyOrphan(b);d.properties=a.PropertyListReader.read(b.itemSet.story,c,b.itemProperties).properties;return d};return d}();a.ScriptReader=g;l=e.Models.Scripts;g=function(){function b(){}b.read=function(b,c,d,e){var f=new l.ScriptSet(b,c,e);if(!(d instanceof Array))return f;d.forEach(function(b){f.scripts.push(a.ScriptReader.read(f,b))});return f};b.readJson=function(c,d,f,g,h){f=e.Util.lowercaseProperties(f);for(var k=new l.ScriptSet(c,d,h),m=0;m<
g.length;m++){var q=g[m];if(f[q+"scripts"]instanceof Array)return b.read(c,d,f[q+"scripts"],h);if(void 0!==f[q+"script"])k.scripts.push(a.ScriptReader.read(k,f[q+"script"]));else{var r=new l.StepEvent(k,0);if(f[q+"actions"]instanceof Array)r.actions=a.ActionReader.readArray(r,f[q+"actions"]);else if(void 0!==f[q+"action"])r.actions=a.ActionReader.readArray(r,[f[q+"action"]]);else continue;k.scripts.push(r)}return k}k=new l.ScriptSet(c,d,h);if(!(f instanceof Array))return k;f.forEach(function(b){k.scripts.push(a.ScriptReader.read(k,
b))});return k};return b}();a.ScriptSetReader=g;g=function(){function b(){}b.write=function(b){var c=[];b.scripts.forEach(function(b){c.push(a.ScriptWriter.write(b))});return c};return b}();a.ScriptSetWriter=g;h=e.Models.Properties;g=function(){function a(){}a.read=function(a){a instanceof Array||(a=void 0);return void 0===a?void 0:new h.Stagger(a[0],a[1],a[2])};return a}();a.StaggerReader=g;g=function(){function a(){}a.write=function(a){if(!a.isDefault()){var b=[];b.push(a.delay);b.push(a.targets);
b.push(a.order);return b}};return a}();a.StaggerWriter=g;k=e.Models;g=function(){function a(){}a.read=function(a,b){return new k.Step(b.autoAdvanceDelay)};return a}();a.StepReader=g;g=function(){function a(){}a.write=function(a){var b={};void 0!==a.autoAdvanceDelay&&(b.autoAdvanceDelay=a.autoAdvanceDelay);return b};return a}();a.StepWriter=g;k=e.Models;g=function(){function b(){}b.read=function(b){b=b||{};var c=a.CanvasReader.read(b.canvas||{}),d=a.FrameReader.read(b.frame||{}),e=[],f=new k.Story(c,
d,e,b.classes);b.flows instanceof Array?b.flows.forEach(function(b){e.push(a.FlowReader.read(f,b))}):void 0!==b.flow?e.push(a.FlowReader.read(f,b.flow)):b.pages instanceof Array?e.push(a.FlowReader.read(f,{pages:b.pages})):void 0!==b.page?e.push(a.FlowReader.read(f,{pages:[b.page]})):b.items instanceof Array?e.push(a.FlowReader.read(f,{pages:[{items:b.items}]})):void 0!==b.item&&e.push(a.FlowReader.read(f,{pages:[{items:[b.item]}]}));0===e.length&&e.push(a.FlowReader.read(f,{}));return f};return b}();
a.StoryReader=g;g=function(){function b(){}b.write=function(b){var c={};c.canvas=a.CanvasWriter.write(b.canvas);c.frame=a.FrameWriter.write(b.frame);c.flows=[];b.flows.forEach(function(b){c.flows.push(a.FlowWriter.write(b))});return c};b.stringify=function(a){return JSON.stringify(b.write(a))};return b}();a.StoryWriter=g})(e.Serialization||(e.Serialization={}));(function(a){a.createChildSvgElement=function(a,b,e){void 0===e&&(e=void 0);b=document.createElementNS("http://www.w3.org/2000/svg",b);for(var h in e)b.setAttribute(h,
e[h]);a.appendChild(b);return b}})(e.Util||(e.Util={}));e.reload=k;e.bootstrap=l;l()})(ProStyle||(ProStyle={}));
